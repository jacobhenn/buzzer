var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function l(t,e,n=e){return t.set(n),e}function i(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function h(){return m(" ")}function p(){return m("")}function g(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}function v(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function x(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function k(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}let w;function z(t){w=t}const S=[],N=[],_=[],C=[],E=Promise.resolve();let T=!1;function L(t){_.push(t)}let O=!1;const I=new Set;function M(){if(!O){O=!0;do{for(let t=0;t<S.length;t+=1){const e=S[t];z(e),P(e.$$)}for(z(null),S.length=0;N.length;)N.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];I.has(e)||(I.add(e),e())}_.length=0}while(S.length);for(;C.length;)C.pop()();T=!1,O=!1,I.clear()}}function P(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}const B=new Set;let H;function K(){H={r:0,c:[],p:H}}function A(){H.r||o(H.c),H=H.p}function R(t,e){t&&t.i&&(B.delete(t),t.i(e))}function q(t,e,n,o){if(t&&t.o){if(B.has(t))return;B.add(t),H.c.push((()=>{B.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function j(t,e){q(t,1,1,(()=>{e.delete(t.key)}))}function J(t){t&&t.c()}function U(t,n,c){const{fragment:u,on_mount:l,on_destroy:i,after_update:s}=t.$$;u&&u.m(n,c),L((()=>{const n=l.map(e).filter(r);i?i.push(...n):o(n),t.$$.on_mount=[]})),s.forEach(L)}function W(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function D(t,e){-1===t.$$.dirty[0]&&(S.push(t),T||(T=!0,E.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function F(e,r,c,u,l,i,s=[-1]){const d=w;z(e);const f=r.props||{},m=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:s,skip_bound:!1};let h=!1;if(m.ctx=c?c(e,f,((t,n,...o)=>{const r=o.length?o[0]:n;return m.ctx&&l(m.ctx[t],m.ctx[t]=r)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](r),h&&D(e,t)),n})):[],m.update(),h=!0,o(m.before_update),m.fragment=!!u&&u(m.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);m.fragment&&m.fragment.l(t),t.forEach(a)}else m.fragment&&m.fragment.c();r.intro&&R(e.$$.fragment),U(e,r.target,r.anchor),M()}z(d)}class G{$destroy(){W(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Q=[];function V(e,n=t){let o;const r=[];function u(t){if(c(e,t)&&(e=t,o)){const t=!Q.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),Q.push(n,e)}if(t){for(let t=0;t<Q.length;t+=2)Q[t][0](Q[t+1]);Q.length=0}}}return{set:u,update:function(t){u(t(e))},subscribe:function(c,l=t){const i=[c,l];return r.push(i),1===r.length&&(o=n(u)||t),c(e),()=>{const t=r.indexOf(i);-1!==t&&r.splice(t,1),0===r.length&&(o(),o=null)}}}}const X=V([{name:"",blocked:!1,buzzKey:"Space"}]),Y=V({state:"Closed",owner:null}),Z=V(!1),tt=V(!1),et=V(!1),nt=V(!0),ot=V(200),rt=V(""),ct=V([]),ut=V([]);async function lt(t){let e=await fetch(t);return await e.json()}function it(t,e){fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function st(t){fetch("/buzz",{method:"POST",headers:{"Content-Type":"text/plain"},body:t})}const at=[{code:"Space",name:"Space"},{code:"NumpadEnter",name:"Numpad Enter"},{code:"ControlLeft",name:"Left Control"},{code:"Numpad0",name:"Numpad 0"},{code:"ShiftLeft",name:"Left Shift"},{code:"ShiftRight",name:"Right Shift"},{code:"Enter",name:"Enter"},{code:"ControlRight",name:"Right Control"}];function dt(t){let e;return{c(){e=m(t[1])},m(t,n){s(t,e,n)},p(t,n){2&n&&b(e,t[1])},d(t){t&&a(e)}}}function ft(t){let e,n,r,c,u;return{c(){e=f("input"),n=h(),r=f("button"),r.textContent="üû¨",$(e,"class","hidden"),$(r,"class","x")},m(o,l){s(o,e,l),y(e,t[3]),s(o,n,l),s(o,r,l),c||(u=[g(e,"input",t[8]),g(e,"blur",t[5]),g(e,"keydown",t[7]),g(r,"mousedown",t[6])],c=!0)},p(t,n){8&n&&e.value!==t[3]&&y(e,t[3])},d(t){t&&a(e),t&&a(n),t&&a(r),c=!1,o(u)}}}function mt(e){let n,o,r,c,u,l,d,g,y=e[2][e[0]].time[0].toString().padStart(2,"0")+"",v=e[2][e[0]].time[1].toString().padStart(2,"0")+"",x=e[2][e[0]].name+"";function k(t,e){return t[4]?ft:dt}let w=k(e),z=w(e);return{c(){n=f("span"),o=m(y),r=m(":"),c=m(v),u=h(),l=m(x),d=m(":\n"),z.c(),g=p(),$(n,"class","time svelte-mws1xc")},m(t,e){s(t,n,e),i(n,o),i(n,r),i(n,c),s(t,u,e),s(t,l,e),s(t,d,e),z.m(t,e),s(t,g,e)},p(t,[e]){5&e&&y!==(y=t[2][t[0]].time[0].toString().padStart(2,"0")+"")&&b(o,y),5&e&&v!==(v=t[2][t[0]].time[1].toString().padStart(2,"0")+"")&&b(c,v),5&e&&x!==(x=t[2][t[0]].name+"")&&b(l,x),w===(w=k(t))&&z?z.p(t,e):(z.d(1),z=w(t),z&&(z.c(),z.m(g.parentNode,g)))},i:t,o:t,d(t){t&&a(n),t&&a(u),t&&a(l),t&&a(d),z.d(t),t&&a(g)}}}function ht(t,e,n){let o,r,c,l;u(t,ct,(t=>n(2,c=t))),u(t,Z,(t=>n(4,l=t)));let{thisIndex:i}=e;function s(){it("/command",{action:"EditHistory",index:i,score:parseInt(r)})}return console.log(`displaying history entry #${i}`),t.$$set=t=>{"thisIndex"in t&&n(0,i=t.thisIndex)},t.$$.update=()=>{5&t.$$.dirty&&n(1,o=c[i].score),2&t.$$.dirty&&n(3,r=o.toString())},[i,o,c,r,l,s,function(){it("/command",{action:"RemoveHistory",index:i})},function(t){"Enter"===t.code&&s()},function(){r=this.value,n(3,r),n(1,o),n(2,c),n(0,i)}]}class pt extends G{constructor(t){super(),F(this,t,ht,mt,c,{thisIndex:0})}}function gt(t,e,n){const o=t.slice();return o[6]=e[n],o}function $t(t){let e,n;return{c(){e=f("span"),e.textContent="score history",n=f("br"),$(e,"class","header")},m(t,o){s(t,e,o),s(t,n,o)},d(t){t&&a(e),t&&a(n)}}}function bt(t){let e,n;return{c(){e=f("span"),e.textContent="score history (click to edit)",n=f("br"),$(e,"class","header")},m(t,o){s(t,e,o),s(t,n,o)},d(t){t&&a(e),t&&a(n)}}}function yt(t){let e,n,o;return e=new pt({props:{thisIndex:t[6]}}),{c(){J(e.$$.fragment),n=f("br")},m(t,r){U(e,t,r),s(t,n,r),o=!0},p(t,n){const o={};8&n&&(o.thisIndex=t[6]),e.$set(o)},i(t){o||(R(e.$$.fragment,t),o=!0)},o(t){q(e.$$.fragment,t),o=!1},d(t){W(e,t),t&&a(n)}}}function vt(t){let e,n,o=""===t[0]||t[3][t[6]].name.startsWith(t[0]),r=o&&yt(t);return{c(){r&&r.c(),e=p()},m(t,o){r&&r.m(t,o),s(t,e,o),n=!0},p(t,n){9&n&&(o=""===t[0]||t[3][t[6]].name.startsWith(t[0])),o?r?(r.p(t,n),9&n&&R(r,1)):(r=yt(t),r.c(),R(r,1),r.m(e.parentNode,e)):r&&(K(),q(r,1,1,(()=>{r=null})),A())},i(t){n||(R(r),n=!0)},o(t){q(r),n=!1},d(t){r&&r.d(t),t&&a(e)}}}function xt(t){let e,n,r,c,u,l,i,m,p,b,x,k,w;function z(t,e){return t[2]?bt:$t}let S=z(t),N=S(t),_=kt(0,t[3].length-1),C=[];for(let e=0;e<_.length;e+=1)C[e]=vt(gt(t,_,e));const E=t=>q(C[t],1,1,(()=>{C[t]=null}));return{c(){e=f("hr"),n=h(),N.c(),r=h(),c=f("button"),c.innerHTML="‚Üê <u>b</u>ack to current scores\n",u=f("br"),l=h(),i=f("input"),m=f("br"),p=h(),b=f("div");for(let t=0;t<C.length;t+=1)C[t].c();$(i,"placeholder","filter player name"),v(b,"text-align","right"),v(b,"display","inline-block")},m(o,a){s(o,e,a),s(o,n,a),N.m(o,a),s(o,r,a),s(o,c,a),s(o,u,a),s(o,l,a),s(o,i,a),y(i,t[0]),s(o,m,a),s(o,p,a),s(o,b,a);for(let t=0;t<C.length;t+=1)C[t].m(b,null);x=!0,k||(w=[g(c,"click",t[4]),g(i,"input",t[5])],k=!0)},p(t,[e]){if(S!==(S=z(t))&&(N.d(1),N=S(t),N&&(N.c(),N.m(r.parentNode,r))),1&e&&i.value!==t[0]&&y(i,t[0]),9&e){let n;for(_=kt(0,t[3].length-1),n=0;n<_.length;n+=1){const o=gt(t,_,n);C[n]?(C[n].p(o,e),R(C[n],1)):(C[n]=vt(o),C[n].c(),R(C[n],1),C[n].m(b,null))}for(K(),n=_.length;n<C.length;n+=1)E(n);A()}},i(t){if(!x){for(let t=0;t<_.length;t+=1)R(C[t]);x=!0}},o(t){C=C.filter(Boolean);for(let t=0;t<C.length;t+=1)q(C[t]);x=!1},d(t){t&&a(e),t&&a(n),N.d(t),t&&a(r),t&&a(c),t&&a(u),t&&a(l),t&&a(i),t&&a(m),t&&a(p),t&&a(b),d(C,t),k=!1,o(w)}}}function kt(t,e){return Array.from({length:e-t+1},((t,e)=>e))}function wt(t,e,n){let o,r,c;u(t,tt,(t=>n(1,o=t))),u(t,Z,(t=>n(2,r=t))),u(t,ct,(t=>n(3,c=t)));let i="";document.addEventListener("keydown",(function(t){"b"===t.key&&"INPUT"!==document.activeElement.nodeName&&l(tt,o=!1,o)}));return[i,o,r,c,()=>l(tt,o=!1,o),function(){i=this.value,n(0,i)}]}class zt extends G{constructor(t){super(),F(this,t,wt,xt,c,{})}}function St(t,e,n){const o=t.slice();return o[2]=e[n],o}function Nt(e){let n,o,r,c=e[2].name+"";return{c(){n=f("option"),o=m(c),r=h(),n.__value=e[2].code,n.value=n.__value},m(t,e){s(t,n,e),i(n,o),i(n,r)},p:t,d(t){t&&a(n)}}}function _t(e){let n,r,c,u=at,l=[];for(let t=0;t<u.length;t+=1)l[t]=Nt(St(e,u,t));return{c(){n=f("select");for(let t=0;t<l.length;t+=1)l[t].c();void 0===e[0].buzzKey&&L((()=>e[1].call(n)))},m(t,o){s(t,n,o);for(let t=0;t<l.length;t+=1)l[t].m(n,null);x(n,e[0].buzzKey),r||(c=[g(n,"change",e[1]),g(n,"change",Ct)],r=!0)},p(t,[e]){if(0&e){let o;for(u=at,o=0;o<u.length;o+=1){const r=St(t,u,o);l[o]?l[o].p(r,e):(l[o]=Nt(r),l[o].c(),l[o].m(n,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=u.length}1&e&&x(n,t[0].buzzKey)},i:t,o:t,d(t){t&&a(n),d(l,t),r=!1,o(c)}}}function Ct(){document.activeElement.blur()}function Et(t,e,n){let{contestant:o}=e;return document.addEventListener("keydown",(function(t){t.code!==o.buzzKey||o.blocked||st(o.name)})),t.$$set=t=>{"contestant"in t&&n(0,o=t.contestant)},[o,function(){o.buzzKey=k(this),n(0,o)}]}class Tt extends G{constructor(t){super(),F(this,t,Et,_t,c,{contestant:0})}}function Lt(t,e,n){const o=t.slice();return o[4]=e[n],o[5]=e,o[6]=n,o}function Ot(t){let e,n,o,r;return{c(){e=f("hr"),n=h(),o=f("span"),o.textContent="buzz keys (click to change)",r=f("br"),$(o,"class","header")},m(t,c){s(t,e,c),s(t,n,c),s(t,o,c),s(t,r,c)},d(t){t&&a(e),t&&a(n),t&&a(o),t&&a(r)}}}function It(t){let e,n,o,r,c,u,l=t[4].name+"";function i(e){t[3].call(null,e,t[4],t[5],t[6])}let d={};return void 0!==t[4]&&(d.contestant=t[4]),o=new Tt({props:d}),N.push((()=>function(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}(o,"contestant",i))),{c(){e=m(l),n=m(":\n    "),J(o.$$.fragment),c=f("br")},m(t,r){s(t,e,r),s(t,n,r),U(o,t,r),s(t,c,r),u=!0},p(n,c){t=n,(!u||1&c)&&l!==(l=t[4].name+"")&&b(e,l);const i={};var s;!r&&1&c&&(r=!0,i.contestant=t[4],s=()=>r=!1,C.push(s)),o.$set(i)},i(t){u||(R(o.$$.fragment,t),u=!0)},o(t){q(o.$$.fragment,t),u=!1},d(t){t&&a(e),t&&a(n),W(o,t),t&&a(c)}}}function Mt(t){let e,n;return{c(){e=f("strong"),e.textContent="some players have the same buzz key\n    ",n=f("br"),v(e,"color","#ebcb8b")},m(t,o){s(t,e,o),s(t,n,o)},d(t){t&&a(e),t&&a(n)}}}function Pt(t){let e,n,o,r,c=0!==t[0].length&&Ot(),u=t[0],l=[];for(let e=0;e<u.length;e+=1)l[e]=It(Lt(t,u,e));const i=t=>q(l[t],1,1,(()=>{l[t]=null}));let f=t[1]&&Mt();return{c(){c&&c.c(),e=h();for(let t=0;t<l.length;t+=1)l[t].c();n=h(),f&&f.c(),o=p()},m(t,u){c&&c.m(t,u),s(t,e,u);for(let e=0;e<l.length;e+=1)l[e].m(t,u);s(t,n,u),f&&f.m(t,u),s(t,o,u),r=!0},p(t,[r]){if(0!==t[0].length?c||(c=Ot(),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),1&r){let e;for(u=t[0],e=0;e<u.length;e+=1){const o=Lt(t,u,e);l[e]?(l[e].p(o,r),R(l[e],1)):(l[e]=It(o),l[e].c(),R(l[e],1),l[e].m(n.parentNode,n))}for(K(),e=u.length;e<l.length;e+=1)i(e);A()}t[1]?f||(f=Mt(),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},i(t){if(!r){for(let t=0;t<u.length;t+=1)R(l[t]);r=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)q(l[t]);r=!1},d(t){c&&c.d(t),t&&a(e),d(l,t),t&&a(n),f&&f.d(t),t&&a(o)}}}function Bt(t,e,n){let o,r,c;return u(t,X,(t=>n(0,c=t))),t.$$.update=()=>{1&t.$$.dirty&&n(2,o=c.map((t=>t.buzzKey))),4&t.$$.dirty&&n(1,r=o.length!==new Set(o).size)},[c,r,o,function(t,e,n,o){n[o]=t,X.set(c)}]}class Ht extends G{constructor(t){super(),F(this,t,Bt,Pt,c,{})}}function Kt(t,e,n){const o=t.slice();return o[6]=e[n],o}function At(t){let e,n=t[1],o=[];for(let e=0;e<n.length;e+=1)o[e]=qt(Kt(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=p()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);s(t,e,n)},p(t,r){if(2&r){let c;for(n=t[1],c=0;c<n.length;c+=1){const u=Kt(t,n,c);o[c]?o[c].p(u,r):(o[c]=qt(u),o[c].c(),o[c].m(e.parentNode,e))}for(;c<o.length;c+=1)o[c].d(1);o.length=n.length}},d(t){d(o,t),t&&a(e)}}}function Rt(t){let e,n,o,r,c=t[6].name+"";return{c(){e=f("div"),n=f("strong"),o=m(c),r=m("\n                    has already buzzed in\n                "),v(n,"color","#ebcb8b"),v(e,"color","#ebcb8b")},m(t,c){s(t,e,c),i(e,n),i(n,o),i(e,r)},p(t,e){2&e&&c!==(c=t[6].name+"")&&b(o,c)},d(t){t&&a(e)}}}function qt(t){let e,n=t[6].blocked&&Rt(t);return{c(){n&&n.c(),e=p()},m(t,o){n&&n.m(t,o),s(t,e,o)},p(t,o){t[6].blocked?n?n.p(t,o):(n=Rt(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&a(e)}}}function jt(e){let n,o,r,c,u,l,d,p,y,v,x="Open"===e[0].state&&At(e);return{c(){n=f("span"),o=f("div"),c=h(),u=f("div"),l=m(e[3]),p=h(),x&&x.c(),$(o,"id","topbar"),$(o,"style",r=`background-color:#${e[2]}`),$(o,"class","svelte-ygcg7q"),$(u,"id","state"),$(u,"style",d=`color:#${e[2]}`),$(u,"class","svelte-ygcg7q"),$(n,"id","buzzer-container"),$(n,"class","svelte-ygcg7q")},m(t,r){s(t,n,r),i(n,o),i(n,c),i(n,u),i(u,l),i(n,p),x&&x.m(n,null),y||(v=g(n,"click",e[4]),y=!0)},p(t,[e]){4&e&&r!==(r=`background-color:#${t[2]}`)&&$(o,"style",r),8&e&&b(l,t[3]),4&e&&d!==(d=`color:#${t[2]}`)&&$(u,"style",d),"Open"===t[0].state?x?x.p(t,e):(x=At(t),x.c(),x.m(n,null)):x&&(x.d(1),x=null)},i:t,o:t,d(t){t&&a(n),x&&x.d(),y=!1,v()}}}function Jt(t,e,n){let o,r,c,l,i;return u(t,et,(t=>n(5,o=t))),u(t,Y,(t=>n(0,r=t))),u(t,X,(t=>n(1,c=t))),t.$$.update=()=>{35&t.$$.dirty&&(o?(n(2,l="d08770"),n(3,i="couldn't reach server")):"Closed"==r.state?(n(2,l="bf616a"),n(3,i="the buzzer is closed")):"Open"==r.state?(n(2,l=c.every((t=>t.blocked))?"ebcb8b":"a3be8c"),n(3,i="the buzzer is open")):"TakenBy"==r.state&&(n(2,l=c.some((t=>t.name===r.owner))?"88c0d0":"bf616a"),n(3,i=`${r.owner} has buzzed in`)))},[r,c,l,i,function(){let t=c[0];"Open"!=r.state||t.blocked||st(t.name)},o]}class Ut extends G{constructor(t){super(),F(this,t,Jt,jt,c,{})}}function Wt(t){let e,n;return{c(){e=m(t[1]),n=h()},m(t,o){s(t,e,o),s(t,n,o)},p(t,n){2&n&&b(e,t[1])},d(t){t&&a(e),t&&a(n)}}}function Dt(t){let e,n,r,c,u,l;return{c(){e=f("input"),n=h(),r=f("button"),r.textContent="üû¨",c=h(),$(e,"class","hidden"),$(r,"class","x")},m(o,i){s(o,e,i),y(e,t[2]),s(o,n,i),s(o,r,i),s(o,c,i),u||(l=[g(e,"input",t[7]),g(e,"focusout",t[4]),g(e,"keydown",t[6]),g(r,"mousedown",t[5])],u=!0)},p(t,n){4&n&&e.value!==t[2]&&y(e,t[2])},d(t){t&&a(e),t&&a(n),t&&a(r),t&&a(c),u=!1,o(l)}}}function Ft(e){let n,o,r;function c(t,e){return t[3]?Dt:Wt}let u=c(e),l=u(e);return{c(){n=m(e[0]),o=m(":\n"),l.c(),r=f("br")},m(t,e){s(t,n,e),s(t,o,e),l.m(t,e),s(t,r,e)},p(t,[e]){1&e&&b(n,t[0]),u===(u=c(t))&&l?l.p(t,e):(l.d(1),l=u(t),l&&(l.c(),l.m(r.parentNode,r)))},i:t,o:t,d(t){t&&a(n),t&&a(o),l.d(t),t&&a(r)}}}function Gt(t,e,n){let o,r,c;u(t,ut,(t=>n(8,r=t))),u(t,Z,(t=>n(3,c=t)));let{thisName:i}=e,{thisScore:s}=e;function a(){it("/command",{action:"SetScore",name:i,score:parseInt(o)})}return t.$$set=t=>{"thisName"in t&&n(0,i=t.thisName),"thisScore"in t&&n(1,s=t.thisScore)},t.$$.update=()=>{2&t.$$.dirty&&n(2,o=s.toString())},[i,s,o,c,a,function(){l(ut,r=r.filter((t=>t.name!==i)),r),it("/command",{action:"RemovePlayer",name:i})},function(t){"Enter"==t.code&&a()},function(){o=this.value,n(2,o),n(1,s)}]}class Qt extends G{constructor(t){super(),F(this,t,Gt,Ft,c,{thisName:0,thisScore:1})}}function Vt(t,e,n){const o=t.slice();return o[4]=e[n],o}function Xt(t){let e,n;return{c(){e=f("span"),e.textContent="scores",n=f("br"),$(e,"class","header")},m(t,o){s(t,e,o),s(t,n,o)},d(t){t&&a(e),t&&a(n)}}}function Yt(t){let e,n;return{c(){e=f("span"),e.textContent="scores (click to edit)",n=f("br"),$(e,"class","header")},m(t,o){s(t,e,o),s(t,n,o)},d(t){t&&a(e),t&&a(n)}}}function Zt(t,e){let n,o,r;return o=new Qt({props:{thisName:e[4].name,thisScore:e[4].score}}),{key:t,first:null,c(){n=p(),J(o.$$.fragment),this.first=n},m(t,e){s(t,n,e),U(o,t,e),r=!0},p(t,n){e=t;const r={};4&n&&(r.thisName=e[4].name),4&n&&(r.thisScore=e[4].score),o.$set(r)},i(t){r||(R(o.$$.fragment,t),r=!0)},o(t){q(o.$$.fragment,t),r=!1},d(t){t&&a(n),W(o,t)}}}function te(t){let e,n,o,r,c,u,l,i,d,m,p,$=[],b=new Map;function y(t,e){return t[1]?Yt:Xt}let x=y(t),k=x(t),w=t[2];const z=t=>t[4].name;for(let e=0;e<w.length;e+=1){let n=Vt(t,w,e),o=z(n);b.set(o,$[e]=Zt(o,n))}return{c(){e=f("hr"),n=h(),k.c(),o=h(),r=f("button"),r.innerHTML="view score <u>h</u>istory",c=h(),u=f("br"),l=h(),i=f("div");for(let t=0;t<$.length;t+=1)$[t].c();v(i,"text-align","right"),v(i,"display","inline-block")},m(a,f){s(a,e,f),s(a,n,f),k.m(a,f),s(a,o,f),s(a,r,f),s(a,c,f),s(a,u,f),s(a,l,f),s(a,i,f);for(let t=0;t<$.length;t+=1)$[t].m(i,null);d=!0,m||(p=g(r,"click",t[3]),m=!0)},p(t,[e]){x!==(x=y(t))&&(k.d(1),k=x(t),k&&(k.c(),k.m(o.parentNode,o))),4&e&&(w=t[2],K(),$=function(t,e,n,o,r,c,u,l,i,s,a,d){let f=t.length,m=c.length,h=f;const p={};for(;h--;)p[t[h].key]=h;const g=[],$=new Map,b=new Map;for(h=m;h--;){const t=d(r,c,h),l=n(t);let i=u.get(l);i?o&&i.p(t,e):(i=s(l,t),i.c()),$.set(l,g[h]=i),l in p&&b.set(l,Math.abs(h-p[l]))}const y=new Set,v=new Set;function x(t){R(t,1),t.m(l,a),u.set(t.key,t),a=t.first,m--}for(;f&&m;){const e=g[m-1],n=t[f-1],o=e.key,r=n.key;e===n?(a=e.first,f--,m--):$.has(r)?!u.has(o)||y.has(o)?x(e):v.has(r)?f--:b.get(o)>b.get(r)?(v.add(o),x(e)):(y.add(r),f--):(i(n,u),f--)}for(;f--;){const e=t[f];$.has(e.key)||i(e,u)}for(;m;)x(g[m-1]);return g}($,e,z,1,t,w,b,i,j,Zt,null,Vt),A())},i(t){if(!d){for(let t=0;t<w.length;t+=1)R($[t]);d=!0}},o(t){for(let t=0;t<$.length;t+=1)q($[t]);d=!1},d(t){t&&a(e),t&&a(n),k.d(t),t&&a(o),t&&a(r),t&&a(c),t&&a(u),t&&a(l),t&&a(i);for(let t=0;t<$.length;t+=1)$[t].d();m=!1,p()}}}function ee(t,e,n){let o,r,c;u(t,tt,(t=>n(0,o=t))),u(t,Z,(t=>n(1,r=t))),u(t,ut,(t=>n(2,c=t))),document.addEventListener("keydown",(function(t){"h"===t.key&&l(tt,o=!0,o)}));return[o,r,c,()=>l(tt,o=!0,o)]}class ne extends G{constructor(t){super(),F(this,t,ee,te,c,{})}}function oe(t,e,n){const o=t.slice();return o[18]=e[n],o}function re(t){let e,n,r,c,u,l,d,p,$,y,v=t[4].owner+"";return{c(){e=m("is "),n=f("strong"),r=m(v),c=h(),u=f("button"),u.innerHTML="<u>c</u>orrect",l=m(" or\n    "),d=f("button"),d.innerHTML="<u>i</u>ncorrect",p=m("?")},m(o,a){s(o,e,a),s(o,n,a),i(n,r),s(o,c,a),s(o,u,a),s(o,l,a),s(o,d,a),s(o,p,a),$||(y=[g(u,"mousedown",t[9]),g(d,"mousedown",t[10])],$=!0)},p(t,e){16&e&&v!==(v=t[4].owner+"")&&b(r,v)},d(t){t&&a(e),t&&a(n),t&&a(c),t&&a(u),t&&a(l),t&&a(d),t&&a(p),$=!1,o(y)}}}function ce(t){let e,n,r,c,u,l,p,y,v,k,w,z,S,N,_,C,E,T,O,I,M,P,B,H,K=t[0]?"‚òë":"‚òê",A=t[5],R=[];for(let e=0;e<A.length;e+=1)R[e]=le(oe(t,A,e));return{c(){e=m("points worth:\n    "),n=f("select");for(let t=0;t<R.length;t+=1)R[t].c();r=h(),c=f("button"),u=f("u"),u.textContent="+",p=h(),y=f("button"),v=f("u"),v.textContent="-",w=h(),z=f("br"),S=h(),N=f("button"),_=m(K),C=h(),E=f("u"),E.textContent="d",T=m("ouble Jeopardy!"),O=h(),I=f("br"),M=h(),P=f("button"),P.innerHTML="<u>o</u>pen buzzer",$(n,"type","number"),void 0===t[1]&&L((()=>t[14].call(n))),c.disabled=l=!t[3],y.disabled=k=!t[2],$(P,"class","large")},m(o,l){s(o,e,l),s(o,n,l);for(let t=0;t<R.length;t+=1)R[t].m(n,null);x(n,t[1]),s(o,r,l),s(o,c,l),i(c,u),s(o,p,l),s(o,y,l),i(y,v),s(o,w,l),s(o,z,l),s(o,S,l),s(o,N,l),i(N,_),i(N,C),i(N,E),i(N,T),s(o,O,l),s(o,I,l),s(o,M,l),s(o,P,l),B||(H=[g(n,"change",t[14]),g(c,"mousedown",t[6]),g(y,"mousedown",t[7]),g(N,"mousedown",t[15]),g(P,"mousedown",t[10])],B=!0)},p(t,e){if(32&e){let o;for(A=t[5],o=0;o<A.length;o+=1){const r=oe(t,A,o);R[o]?R[o].p(r,e):(R[o]=le(r),R[o].c(),R[o].m(n,null))}for(;o<R.length;o+=1)R[o].d(1);R.length=A.length}34&e&&x(n,t[1]),8&e&&l!==(l=!t[3])&&(c.disabled=l),4&e&&k!==(k=!t[2])&&(y.disabled=k),1&e&&K!==(K=t[0]?"‚òë":"‚òê")&&b(_,K)},d(t){t&&a(e),t&&a(n),d(R,t),t&&a(r),t&&a(c),t&&a(p),t&&a(y),t&&a(w),t&&a(z),t&&a(S),t&&a(N),t&&a(O),t&&a(I),t&&a(M),t&&a(P),B=!1,o(H)}}}function ue(e){let n,o,r;return{c(){n=f("button"),n.innerHTML="<u>e</u>nd round early",$(n,"class","large")},m(t,c){s(t,n,c),o||(r=g(n,"mousedown",e[8]),o=!0)},p:t,d(t){t&&a(n),o=!1,r()}}}function le(e){let n,o,r=e[18]+"";return{c(){n=f("option"),o=m(r),n.__value=e[18],n.value=n.__value},m(t,e){s(t,n,e),i(n,o)},p:t,d(t){t&&a(n)}}}function ie(e){let n,o,r,c,u,l;function i(t,e){return"Open"===t[4].state?ue:"Closed"===t[4].state?ce:"TakenBy"===t[4].state?re:void 0}let d=i(e),m=d&&d(e);return{c(){n=f("hr"),o=h(),r=f("span"),r.textContent="host commands",c=f("br"),u=h(),m&&m.c(),l=p(),$(r,"class","header")},m(t,e){s(t,n,e),s(t,o,e),s(t,r,e),s(t,c,e),s(t,u,e),m&&m.m(t,e),s(t,l,e)},p(t,[e]){d===(d=i(t))&&m?m.p(t,e):(m&&m.d(1),m=d&&d(t),m&&(m.c(),m.m(l.parentNode,l)))},i:t,o:t,d(t){t&&a(n),t&&a(o),t&&a(r),t&&a(c),t&&a(u),m&&m.d(t),t&&a(l)}}}function se(t,e,n){let o,r,c,i,s;u(t,ot,(t=>n(1,i=t))),u(t,Y,(t=>n(4,s=t)));const a=[200,400,600,800,1e3,1200,1600,2e3],d=[1,3,5,6,7],f=[0,1,2,3,4];let m=0,h=0,p=!1;function g(){p?n(11,m=(m+1)%5):n(12,h=(h+1)%5)}function $(){p?n(11,m-=1):n(12,h-=1)}function b(){it("/command",{action:"EndRound"}),g()}function y(){it("/command",{action:"AddScore",name:s.owner,score:i}),b()}function v(){it("/command",{action:"OpenBuzzer"})}document.addEventListener("keydown",(function(t){"INPUT"!==document.activeElement.nodeName&&("Open"===s.state&&"e"===t.key?b():"Closed"===s.state&&"o"===t.key?v():"TakenBy"===s.state&&"c"===t.key?y():"TakenBy"===s.state&&"i"===t.key?v():"d"===t.key?n(0,p=!p):c&&"+"===t.key?g():r&&"-"===t.key&&$())}));return t.$$.update=()=>{6145&t.$$.dirty&&n(13,o=p?d[m]:f[h]),8192&t.$$.dirty&&l(ot,i=a[o],i),6145&t.$$.dirty&&n(2,r=p?m>0:h>0),6145&t.$$.dirty&&n(3,c=p?m<4:h<4)},[p,i,r,c,s,a,g,$,b,y,v,m,h,o,function(){i=k(this),ot.set(i),n(5,a)},()=>n(0,p=!p)]}class ae extends G{constructor(t){super(),F(this,t,se,ie,c,{})}}function de(t,e,n){const o=t.slice();return o[9]=e[n],o[10]=e,o[11]=n,o}function fe(t){let e,n,o,r,c;function u(){t[5].call(e,t[10],t[11])}return{c(){e=f("input"),n=h(),o=f("br"),$(e,"placeholder","enter your name")},m(l,i){s(l,e,i),y(e,t[9].name),s(l,n,i),s(l,o,i),r||(c=g(e,"input",u),r=!0)},p(n,o){t=n,1&o&&e.value!==t[9].name&&y(e,t[9].name)},d(t){t&&a(e),t&&a(n),t&&a(o),r=!1,c()}}}function me(e){let n,r,c,u,l,p,y,x,k,w,z,S,N,_,C,E,T,L,O,I,M,P,B,H,K,A,R,q,j=e[1]?"‚òë":"‚òê",J=e[0],U=[];for(let t=0;t<J.length;t+=1)U[t]=fe(de(e,J,t));return{c(){n=m("contestant(s), enter your name(s)"),r=f("br"),c=h(),u=f("strong"),u.textContent="hosts do not need to enter their names",l=h(),p=f("hr"),y=h();for(let t=0;t<U.length;t+=1)U[t].c();x=h(),k=f("button"),k.textContent="add contestant",w=h(),z=f("button"),S=m("remove contestant"),_=h(),C=h(),E=f("hr"),T=m("\ndoes this device need host access?"),L=f("br"),O=h(),I=f("button"),M=m(j),P=m("\n    host access"),B=h(),H=f("hr"),K=h(),A=f("button"),A.textContent="play",v(u,"color","#88c0d0"),z.disabled=N=0===e[0].length,$(A,"class","large"),A.disabled=!1},m(t,o){s(t,n,o),s(t,r,o),s(t,c,o),s(t,u,o),s(t,l,o),s(t,p,o),s(t,y,o);for(let e=0;e<U.length;e+=1)U[e].m(t,o);s(t,x,o),s(t,k,o),s(t,w,o),s(t,z,o),i(z,S),s(t,_,o),s(t,C,o),s(t,E,o),s(t,T,o),s(t,L,o),s(t,O,o),s(t,I,o),i(I,M),i(I,P),s(t,B,o),s(t,H,o),s(t,K,o),s(t,A,o),R||(q=[g(k,"mousedown",e[2]),g(z,"mousedown",e[3]),g(I,"mousedown",e[6]),g(A,"mousedown",e[4])],R=!0)},p(t,[e]){if(1&e){let n;for(J=t[0],n=0;n<J.length;n+=1){const o=de(t,J,n);U[n]?U[n].p(o,e):(U[n]=fe(o),U[n].c(),U[n].m(x.parentNode,x))}for(;n<U.length;n+=1)U[n].d(1);U.length=J.length}1&e&&N!==(N=0===t[0].length)&&(z.disabled=N),2&e&&j!==(j=t[1]?"‚òë":"‚òê")&&b(M,j)},i:t,o:t,d(t){t&&a(n),t&&a(r),t&&a(c),t&&a(u),t&&a(l),t&&a(p),t&&a(y),d(U,t),t&&a(x),t&&a(k),t&&a(w),t&&a(z),t&&a(_),t&&a(C),t&&a(E),t&&a(T),t&&a(L),t&&a(O),t&&a(I),t&&a(B),t&&a(H),t&&a(K),t&&a(A),R=!1,o(q)}}}function he(t,e,n){let o,r,c;u(t,X,(t=>n(0,o=t))),u(t,nt,(t=>n(8,r=t))),u(t,Z,(t=>n(1,c=t)));let i=1;return[o,c,function(){l(X,o=[...o,{name:"",blocked:!1,buzzKey:at[i].code}],o),i++},function(){o.pop(),X.set(o),i--},function(){l(X,o=o.filter((t=>!!t.name)),o),o.map((t=>it("/command",{action:"AddPlayer",name:t.name}))),l(nt,r=!1,r)},function(t,e){t[e].name=this.value,X.set(o)},()=>l(Z,c=!c,c)]}class pe extends G{constructor(t){super(),F(this,t,he,me,c,{})}}function ge(t){let e,n,o,r,c,u,l,i,d;e=new Ut({}),o=new Ht({});let f=t[1]&&be();const m=[ve,ye],g=[];function $(t,e){return t[2]?0:1}return u=$(t),l=g[u]=m[u](t),{c(){J(e.$$.fragment),n=h(),J(o.$$.fragment),r=h(),f&&f.c(),c=h(),l.c(),i=p()},m(t,l){U(e,t,l),s(t,n,l),U(o,t,l),s(t,r,l),f&&f.m(t,l),s(t,c,l),g[u].m(t,l),s(t,i,l),d=!0},p(t,e){t[1]?f?2&e&&R(f,1):(f=be(),f.c(),R(f,1),f.m(c.parentNode,c)):f&&(K(),q(f,1,1,(()=>{f=null})),A());let n=u;u=$(t),u!==n&&(K(),q(g[n],1,1,(()=>{g[n]=null})),A(),l=g[u],l||(l=g[u]=m[u](t),l.c()),R(l,1),l.m(i.parentNode,i))},i(t){d||(R(e.$$.fragment,t),R(o.$$.fragment,t),R(f),R(l),d=!0)},o(t){q(e.$$.fragment,t),q(o.$$.fragment,t),q(f),q(l),d=!1},d(t){W(e,t),t&&a(n),W(o,t),t&&a(r),f&&f.d(t),t&&a(c),g[u].d(t),t&&a(i)}}}function $e(e){let n,o;return n=new pe({}),{c(){J(n.$$.fragment)},m(t,e){U(n,t,e),o=!0},p:t,i(t){o||(R(n.$$.fragment,t),o=!0)},o(t){q(n.$$.fragment,t),o=!1},d(t){W(n,t)}}}function be(t){let e,n;return e=new ae({}),{c(){J(e.$$.fragment)},m(t,o){U(e,t,o),n=!0},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){W(e,t)}}}function ye(t){let e,n;return e=new ne({}),{c(){J(e.$$.fragment)},m(t,o){U(e,t,o),n=!0},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){W(e,t)}}}function ve(t){let e,n;return e=new zt({}),{c(){J(e.$$.fragment)},m(t,o){U(e,t,o),n=!0},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){W(e,t)}}}function xe(t){let e,n,o,r,c;const u=[$e,ge],l=[];function i(t,e){return t[0]?0:1}return e=i(t),n=l[e]=u[e](t),{c(){n.c(),o=h(),r=f("div"),r.textContent="v1.3.2",$(r,"id","footer"),$(r,"class","svelte-zc7rqv")},m(t,n){l[e].m(t,n),s(t,o,n),s(t,r,n),c=!0},p(t,[r]){let c=e;e=i(t),e===c?l[e].p(t,r):(K(),q(l[c],1,1,(()=>{l[c]=null})),A(),n=l[e],n?n.p(t,r):(n=l[e]=u[e](t),n.c()),R(n,1),n.m(o.parentNode,o))},i(t){c||(R(n),c=!0)},o(t){q(n),c=!1},d(t){l[e].d(t),t&&a(o),t&&a(r)}}}function ke(t,e,n){let o,r,c,i,s,a,d,f,m;u(t,Y,(t=>n(3,o=t))),u(t,X,(t=>n(4,r=t))),u(t,ut,(t=>n(5,c=t))),u(t,ct,(t=>n(6,i=t))),u(t,et,(t=>n(7,s=t))),u(t,rt,(t=>n(8,a=t))),u(t,nt,(t=>n(0,d=t))),u(t,Z,(t=>n(1,f=t))),u(t,tt,(t=>n(2,m=t)));var h=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,c){function u(t){try{i(o.next(t))}catch(t){c(t)}}function l(t){try{i(o.throw(t))}catch(t){c(t)}}function i(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,l)}i((o=o.apply(t,e||[])).next())}))};return setInterval((function(){return h(this,void 0,void 0,(function*(){let t;yield fetch("/marker").then((t=>t.text())).then((e=>{t=e,l(et,s=!1,s)})).catch((()=>l(et,s=!0,s))),t!==a&&(!function(){h(this,void 0,void 0,(function*(){let t;yield lt("/state/buzzer").then((e=>t=e)),t.state!==o.state&&(r.map((t=>{fetch(`/blocked/${t.name}`).then((t=>t.text())).then((e=>t.blocked="!"===e))})),X.set(r),l(Y,o=t,o)),yield lt("/state/scores").then((t=>l(ut,c=t,c))),yield lt("/state/history").then((t=>l(ct,i=t,i)))}))}(),l(rt,a=t,a))}))}),50),[d,f,m]}return new class extends G{constructor(t){super(),F(this,t,ke,xe,c,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
