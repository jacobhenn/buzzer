var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function r(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(t,n,o){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function l(e){return null==e?"":e}function i(e,t,n=t){return e.set(n),t}function u(e,t){e.appendChild(t)}function a(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function h(e){return document.createTextNode(e)}function p(){return h(" ")}function g(){return h("")}function b(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function z(e,t){e.value=null==t?"":t}function w(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}function v(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}}function k(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function x(e,t,n){e.classList[n?"add":"remove"](t)}let N;function S(e){N=e}const C=[],_=[],O=[],E=[],T=Promise.resolve();let j=!1;function I(e){O.push(e)}let L=!1;const H=new Set;function B(){if(!L){L=!0;do{for(let e=0;e<C.length;e+=1){const t=C[e];S(t),J(t.$$)}for(S(null),C.length=0;_.length;)_.pop()();for(let e=0;e<O.length;e+=1){const t=O[e];H.has(t)||(H.add(t),t())}O.length=0}while(C.length);for(;E.length;)E.pop()();j=!1,L=!1,H.clear()}}function J(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(I)}}const M=new Set;let K;function P(){K={r:0,c:[],p:K}}function R(){K.r||o(K.c),K=K.p}function A(e,t){e&&e.i&&(M.delete(e),e.i(t))}function V(e,t,n,o){if(e&&e.o){if(M.has(e))return;M.add(e),K.c.push((()=>{M.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}const D="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function U(e,t){V(e,1,1,(()=>{t.delete(e.key)}))}function W(e){e&&e.c()}function q(e,n,s){const{fragment:c,on_mount:l,on_destroy:i,after_update:u}=e.$$;c&&c.m(n,s),I((()=>{const n=l.map(t).filter(r);i?i.push(...n):o(n),e.$$.on_mount=[]})),u.forEach(I)}function F(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function G(e,t){-1===e.$$.dirty[0]&&(C.push(e),j||(j=!0,T.then(B)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Q(t,r,s,c,l,i,u=[-1]){const a=N;S(t);const f=r.props||{},m=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:n(),dirty:u,skip_bound:!1};let h=!1;if(m.ctx=s?s(t,f,((e,n,...o)=>{const r=o.length?o[0]:n;return m.ctx&&l(m.ctx[e],m.ctx[e]=r)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](r),h&&G(t,e)),n})):[],m.update(),h=!0,o(m.before_update),m.fragment=!!c&&c(m.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);m.fragment&&m.fragment.l(e),e.forEach(d)}else m.fragment&&m.fragment.c();r.intro&&A(t.$$.fragment),q(t,r.target,r.anchor),B()}S(a)}class X{$destroy(){F(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Y=[];function Z(t,n=e){let o;const r=[];function c(e){if(s(t,e)&&(t=e,o)){const e=!Y.length;for(let e=0;e<r.length;e+=1){const n=r[e];n[1](),Y.push(n,t)}if(e){for(let e=0;e<Y.length;e+=2)Y[e][0](Y[e+1]);Y.length=0}}}return{set:c,update:function(e){c(e(t))},subscribe:function(s,l=e){const i=[s,l];return r.push(i),1===r.length&&(o=n(c)||e),s(t),()=>{const e=r.indexOf(i);-1!==e&&r.splice(e,1),0===r.length&&(o(),o=null)}}}}const ee=Z([{name:"",buzzKey:"Space"}]),te=Z(!1),ne=Z(!1),oe=Z(!0),re=Z(!1),se=Z(""),ce=Z(0),le=Z({buzzer:{state:"Closed",owner:null},scores:{},history:[],ptsworth:200});function ie(e,t){return Array.from({length:t-e+1},((e,t)=>t))}const ue=new WebSocket(`ws://${window.location.host}/ws`),ae=[{code:"Space",name:"Space"},{code:"NumpadEnter",name:"Numpad Enter"},{code:"ControlLeft",name:"Left Control"},{code:"Numpad0",name:"Numpad 0"},{code:"ShiftLeft",name:"Left Shift"},{code:"ShiftRight",name:"Right Shift"},{code:"Enter",name:"Enter"},{code:"ControlRight",name:"Right Control"}];function de(e){let t;return{c(){t=h(e[1])},m(e,n){a(e,t,n)},p(e,n){2&n&&y(t,e[1])},d(e){e&&d(t)}}}function fe(e){let t,n,r,s,c;return{c(){t=m("input"),n=p(),r=m("button"),r.textContent="üû¨",$(t,"class","hidden"),$(r,"class","x")},m(o,l){a(o,t,l),z(t,e[3]),a(o,n,l),a(o,r,l),s||(c=[b(t,"input",e[8]),b(t,"blur",e[5]),b(t,"keydown",e[7]),b(r,"mousedown",e[6])],s=!0)},p(e,n){8&n&&t.value!==e[3]&&z(t,e[3])},d(e){e&&d(t),e&&d(n),e&&d(r),s=!1,o(c)}}}function me(t){let n,o,r,s,c,l,i,f,b=t[2].history[t[0]].time[0].toString().padStart(2,"0")+"",z=t[2].history[t[0]].time[1].toString().padStart(2,"0")+"",w=t[2].history[t[0]].name+"";function v(e,t){return e[4]?fe:de}let k=v(t),x=k(t);return{c(){n=m("span"),o=h(b),r=h(":"),s=h(z),c=p(),l=h(w),i=h(":\n"),x.c(),f=g(),$(n,"class","time svelte-mws1xc")},m(e,t){a(e,n,t),u(n,o),u(n,r),u(n,s),a(e,c,t),a(e,l,t),a(e,i,t),x.m(e,t),a(e,f,t)},p(e,[t]){5&t&&b!==(b=e[2].history[e[0]].time[0].toString().padStart(2,"0")+"")&&y(o,b),5&t&&z!==(z=e[2].history[e[0]].time[1].toString().padStart(2,"0")+"")&&y(s,z),5&t&&w!==(w=e[2].history[e[0]].name+"")&&y(l,w),k===(k=v(e))&&x?x.p(e,t):(x.d(1),x=k(e),x&&(x.c(),x.m(f.parentNode,f)))},i:e,o:e,d(e){e&&d(n),e&&d(c),e&&d(l),e&&d(i),x.d(e),e&&d(f)}}}function he(e,t,n){let o,r,s,l;c(e,le,(e=>n(2,s=e))),c(e,te,(e=>n(4,l=e)));let{thisIndex:i}=t;function u(){ue.send(JSON.stringify({action:"EditHistory",index:i,score:parseInt(r)}))}return e.$$set=e=>{"thisIndex"in e&&n(0,i=e.thisIndex)},e.$$.update=()=>{5&e.$$.dirty&&n(1,o=s.history[i].score),2&e.$$.dirty&&n(3,r=o.toString())},[i,o,s,r,l,u,function(){ue.send(JSON.stringify({action:"RemoveHistory",index:i}))},function(e){"Enter"===e.code&&u()},function(){r=this.value,n(3,r),n(1,o),n(2,s),n(0,i)}]}class pe extends X{constructor(e){super(),Q(this,e,he,me,s,{thisIndex:0})}}function ge(e,t,n){const o=e.slice();return o[6]=t[n],o}function be(e){let t,n;return{c(){t=m("span"),t.textContent="score history",n=m("br"),$(t,"class","header")},m(e,o){a(e,t,o),a(e,n,o)},d(e){e&&d(t),e&&d(n)}}}function $e(e){let t,n;return{c(){t=m("span"),t.textContent="score history (click to edit)",n=m("br"),$(t,"class","header")},m(e,o){a(e,t,o),a(e,n,o)},d(e){e&&d(t),e&&d(n)}}}function ye(e){let t,n,o;return t=new pe({props:{thisIndex:e[6]}}),{c(){W(t.$$.fragment),n=m("br")},m(e,r){q(t,e,r),a(e,n,r),o=!0},p(e,n){const o={};8&n&&(o.thisIndex=e[6]),t.$set(o)},i(e){o||(A(t.$$.fragment,e),o=!0)},o(e){V(t.$$.fragment,e),o=!1},d(e){F(t,e),e&&d(n)}}}function ze(e){let t,n,o=""===e[0]||e[3].history[e[6]].name.startsWith(e[0]),r=o&&ye(e);return{c(){r&&r.c(),t=g()},m(e,o){r&&r.m(e,o),a(e,t,o),n=!0},p(e,n){9&n&&(o=""===e[0]||e[3].history[e[6]].name.startsWith(e[0])),o?r?(r.p(e,n),9&n&&A(r,1)):(r=ye(e),r.c(),A(r,1),r.m(t.parentNode,t)):r&&(P(),V(r,1,1,(()=>{r=null})),R())},i(e){n||(A(r),n=!0)},o(e){V(r),n=!1},d(e){r&&r.d(e),e&&d(t)}}}function we(e){let t,n,r,s,c,l,i,u,h,g,y,v,k;function x(e,t){return e[2]?$e:be}let N=x(e),S=N(e),C=ie(0,e[3].history.length-1),_=[];for(let t=0;t<C.length;t+=1)_[t]=ze(ge(e,C,t));const O=e=>V(_[e],1,1,(()=>{_[e]=null}));return{c(){t=m("hr"),n=p(),S.c(),r=p(),s=m("button"),s.innerHTML="‚Üê <u>b</u>ack to current scores\n",c=m("br"),l=p(),i=m("input"),u=m("br"),h=p(),g=m("div");for(let e=0;e<_.length;e+=1)_[e].c();$(i,"placeholder","filter by player name"),w(g,"text-align","right"),w(g,"display","inline-block")},m(o,d){a(o,t,d),a(o,n,d),S.m(o,d),a(o,r,d),a(o,s,d),a(o,c,d),a(o,l,d),a(o,i,d),z(i,e[0]),a(o,u,d),a(o,h,d),a(o,g,d);for(let e=0;e<_.length;e+=1)_[e].m(g,null);y=!0,v||(k=[b(s,"click",e[4]),b(i,"input",e[5])],v=!0)},p(e,[t]){if(N!==(N=x(e))&&(S.d(1),S=N(e),S&&(S.c(),S.m(r.parentNode,r))),1&t&&i.value!==e[0]&&z(i,e[0]),9&t){let n;for(C=ie(0,e[3].history.length-1),n=0;n<C.length;n+=1){const o=ge(e,C,n);_[n]?(_[n].p(o,t),A(_[n],1)):(_[n]=ze(o),_[n].c(),A(_[n],1),_[n].m(g,null))}for(P(),n=C.length;n<_.length;n+=1)O(n);R()}},i(e){if(!y){for(let e=0;e<C.length;e+=1)A(_[e]);y=!0}},o(e){_=_.filter(Boolean);for(let e=0;e<_.length;e+=1)V(_[e]);y=!1},d(e){e&&d(t),e&&d(n),S.d(e),e&&d(r),e&&d(s),e&&d(c),e&&d(l),e&&d(i),e&&d(u),e&&d(h),e&&d(g),f(_,e),v=!1,o(k)}}}function ve(e,t,n){let o,r,s;c(e,ne,(e=>n(1,o=e))),c(e,te,(e=>n(2,r=e))),c(e,le,(e=>n(3,s=e)));let l="";document.addEventListener("keydown",(function(e){"b"===e.key&&"INPUT"!==document.activeElement.nodeName&&i(ne,o=!1,o)}));return[l,o,r,s,()=>i(ne,o=!1,o),function(){l=this.value,n(0,l)}]}class ke extends X{constructor(e){super(),Q(this,e,ve,we,s,{})}}function xe(e,t,n){const o=e.slice();return o[4]=t[n],o}function Ne(t){let n,o,r,s=t[4].name+"";return{c(){n=m("option"),o=h(s),r=p(),n.__value=t[4].code,n.value=n.__value},m(e,t){a(e,n,t),u(n,o),u(n,r)},p:e,d(e){e&&d(n)}}}function Se(e){let t;return{c(){t=m("option"),t.textContent="Tap/Click",t.__value="Click",t.value=t.__value},m(e,n){a(e,t,n)},d(e){e&&d(t)}}}function Ce(t){let n,r,s,c,l=!t[1].some(t[2]),i=ae,h=[];for(let e=0;e<i.length;e+=1)h[e]=Ne(xe(t,i,e));let p=l&&Se();return{c(){n=m("select");for(let e=0;e<h.length;e+=1)h[e].c();r=g(),p&&p.c(),void 0===t[0].buzzKey&&I((()=>t[3].call(n)))},m(e,o){a(e,n,o);for(let e=0;e<h.length;e+=1)h[e].m(n,null);u(n,r),p&&p.m(n,null),v(n,t[0].buzzKey),s||(c=[b(n,"change",t[3]),b(n,"change",_e)],s=!0)},p(e,[t]){if(0&t){let o;for(i=ae,o=0;o<i.length;o+=1){const s=xe(e,i,o);h[o]?h[o].p(s,t):(h[o]=Ne(s),h[o].c(),h[o].m(n,r))}for(;o<h.length;o+=1)h[o].d(1);h.length=i.length}3&t&&(l=!e[1].some(e[2])),l?p||(p=Se(),p.c(),p.m(n,null)):p&&(p.d(1),p=null),1&t&&v(n,e[0].buzzKey)},i:e,o:e,d(e){e&&d(n),f(h,e),p&&p.d(),s=!1,o(c)}}}function _e(){document.activeElement.blur()}function Oe(e,t,n){let o;c(e,ee,(e=>n(1,o=e)));let{contestant:r}=t;return e.$$set=e=>{"contestant"in e&&n(0,r=e.contestant)},[r,o,e=>e.name!==r.name&&"Click"===e.buzzKey,function(){r.buzzKey=k(this),n(0,r)}]}class Ee extends X{constructor(e){super(),Q(this,e,Oe,Ce,s,{contestant:0})}}function Te(e,t,n){const o=e.slice();return o[4]=t[n],o[5]=t,o[6]=n,o}function je(e){let t,n,o,r;return{c(){t=m("hr"),n=p(),o=m("span"),o.textContent="buzz keys (click to change)",r=m("br"),$(o,"class","header")},m(e,s){a(e,t,s),a(e,n,s),a(e,o,s),a(e,r,s)},d(e){e&&d(t),e&&d(n),e&&d(o),e&&d(r)}}}function Ie(e){let t,n,o,r,s,c,l=e[4].name+"";function i(t){e[3].call(null,t,e[4],e[5],e[6])}let u={};return void 0!==e[4]&&(u.contestant=e[4]),o=new Ee({props:u}),_.push((()=>function(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}(o,"contestant",i))),{c(){t=h(l),n=h(":\n    "),W(o.$$.fragment),s=m("br")},m(e,r){a(e,t,r),a(e,n,r),q(o,e,r),a(e,s,r),c=!0},p(n,s){e=n,(!c||1&s)&&l!==(l=e[4].name+"")&&y(t,l);const i={};var u;!r&&1&s&&(r=!0,i.contestant=e[4],u=()=>r=!1,E.push(u)),o.$set(i)},i(e){c||(A(o.$$.fragment,e),c=!0)},o(e){V(o.$$.fragment,e),c=!1},d(e){e&&d(t),e&&d(n),F(o,e),e&&d(s)}}}function Le(e){let t,n;return{c(){t=m("strong"),t.textContent="some players have the same buzz key\n    ",n=m("br"),w(t,"color","#ebcb8b")},m(e,o){a(e,t,o),a(e,n,o)},d(e){e&&d(t),e&&d(n)}}}function He(e){let t,n,o,r,s=0!==e[0].length&&je(),c=e[0],l=[];for(let t=0;t<c.length;t+=1)l[t]=Ie(Te(e,c,t));const i=e=>V(l[e],1,1,(()=>{l[e]=null}));let u=e[1]&&Le();return{c(){s&&s.c(),t=p();for(let e=0;e<l.length;e+=1)l[e].c();n=p(),u&&u.c(),o=g()},m(e,c){s&&s.m(e,c),a(e,t,c);for(let t=0;t<l.length;t+=1)l[t].m(e,c);a(e,n,c),u&&u.m(e,c),a(e,o,c),r=!0},p(e,[r]){if(0!==e[0].length?s||(s=je(),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),1&r){let t;for(c=e[0],t=0;t<c.length;t+=1){const o=Te(e,c,t);l[t]?(l[t].p(o,r),A(l[t],1)):(l[t]=Ie(o),l[t].c(),A(l[t],1),l[t].m(n.parentNode,n))}for(P(),t=c.length;t<l.length;t+=1)i(t);R()}e[1]?u||(u=Le(),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},i(e){if(!r){for(let e=0;e<c.length;e+=1)A(l[e]);r=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)V(l[e]);r=!1},d(e){s&&s.d(e),e&&d(t),f(l,e),e&&d(n),u&&u.d(e),e&&d(o)}}}function Be(e,t,n){let o,r,s;return c(e,ee,(e=>n(0,s=e))),e.$$.update=()=>{1&e.$$.dirty&&n(2,o=s.map((e=>e.buzzKey))),4&e.$$.dirty&&n(1,r=o.length!==new Set(o).size)},[s,r,o,function(e,t,n,o){n[o]=e,ee.set(s)}]}class Je extends X{constructor(e){super(),Q(this,e,Be,He,s,{})}}function Me(e,t,n){const o=e.slice();return o[8]=t[n],o}function Ke(e,t,n){const o=e.slice();return o[8]=t[n],o}function Pe(e){let t,n,o=e[1].buzzer.owner+"";return{c(){t=h(o),n=h(" has buzzed in")},m(e,o){a(e,t,o),a(e,n,o)},p(e,n){2&n&&o!==(o=e[1].buzzer.owner+"")&&y(t,o)},d(e){e&&d(t),e&&d(n)}}}function Re(t){let n;return{c(){n=h("the buzzer is open")},m(e,t){a(e,n,t)},p:e,d(e){e&&d(n)}}}function Ae(t){let n;return{c(){n=h("the buzzer is closed")},m(e,t){a(e,n,t)},p:e,d(e){e&&d(n)}}}function Ve(e){let t,n,o,r,s,c,l=Qe(e[4])+"";return{c(){t=h("the server has closed the connection\n        ("),n=h(l),o=h(")"),r=m("br"),s=p(),c=h(e[5])},m(e,l){a(e,t,l),a(e,n,l),a(e,o,l),a(e,r,l),a(e,s,l),a(e,c,l)},p(e,t){16&t&&l!==(l=Qe(e[4])+"")&&y(n,l),32&t&&y(c,e[5])},d(e){e&&d(t),e&&d(n),e&&d(o),e&&d(r),e&&d(s),e&&d(c)}}}function De(e){let t,n,o=e[0],r=[];for(let t=0;t<o.length;t+=1)r[t]=We(Ke(e,o,t));let s=e[0].filter(e[7]),c=[];for(let t=0;t<s.length;t+=1)c[t]=qe(Me(e,s,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=p();for(let e=0;e<c.length;e+=1)c[e].c();n=g()},m(e,o){for(let t=0;t<r.length;t+=1)r[t].m(e,o);a(e,t,o);for(let t=0;t<c.length;t+=1)c[t].m(e,o);a(e,n,o)},p(e,l){if(3&l){let n;for(o=e[0],n=0;n<o.length;n+=1){const s=Ke(e,o,n);r[n]?r[n].p(s,l):(r[n]=We(s),r[n].c(),r[n].m(t.parentNode,t))}for(;n<r.length;n+=1)r[n].d(1);r.length=o.length}if(3&l){let t;for(s=e[0].filter(e[7]),t=0;t<s.length;t+=1){const o=Me(e,s,t);c[t]?c[t].p(o,l):(c[t]=qe(o),c[t].c(),c[t].m(n.parentNode,n))}for(;t<c.length;t+=1)c[t].d(1);c.length=s.length}},d(e){f(r,e),e&&d(t),f(c,e),e&&d(n)}}}function Ue(e){let t,n,o,r,s=e[8].name+"";return{c(){t=m("div"),n=m("strong"),o=h(s),r=h("\n                has already buzzed in"),w(n,"color","#ebcb8b"),w(t,"color","#ebcb8b")},m(e,s){a(e,t,s),u(t,n),u(n,o),u(t,r)},p(e,t){1&t&&s!==(s=e[8].name+"")&&y(o,s)},d(e){e&&d(t)}}}function We(e){let t,n=e[1].scores[e[8].name].blocked&&Ue(e);return{c(){n&&n.c(),t=g()},m(e,o){n&&n.m(e,o),a(e,t,o)},p(e,o){e[1].scores[e[8].name].blocked?n?n.p(e,o):(n=Ue(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&d(t)}}}function qe(e){let t,n,o,r,s,c=e[8].name+"";return{c(){t=m("strong"),n=h(c),o=h(","),r=p(),s=m("span"),s.textContent="click or tap anywhere to buzz in",w(t,"color","#a3be8c"),w(s,"color","#a3be8c")},m(e,c){a(e,t,c),u(t,n),u(t,o),a(e,r,c),a(e,s,c)},p(e,t){3&t&&c!==(c=e[8].name+"")&&y(n,c)},d(e){e&&d(t),e&&d(r),e&&d(s)}}}function Fe(e){let t,n,o,r,s,c,l,i=e[1].ptsworth+"";return{c(){t=m("br"),n=p(),o=m("span"),r=h("for "),s=m("strong"),c=h(i),l=h(" points"),$(o,"id","ptsworth")},m(e,i){a(e,t,i),a(e,n,i),a(e,o,i),u(o,r),u(o,s),u(s,c),u(o,l)},p(e,t){2&t&&i!==(i=e[1].ptsworth+"")&&y(c,i)},d(e){e&&d(t),e&&d(n),e&&d(o)}}}function Ge(t){let n,o,r,s,c,i,u,f;function h(e,t){return e[3]?Ve:"Closed"===e[1].buzzer.state?Ae:"Open"===e[1].buzzer.state?Re:Pe}let b=h(t),y=b(t),z="Open"===t[1].buzzer.state&&De(t),w=!t[6]&&Fe(t);return{c(){n=m("div"),r=p(),s=m("div"),y.c(),i=p(),z&&z.c(),u=p(),w&&w.c(),f=g(),$(n,"id","topbar"),$(n,"class",o=l(t[1].buzzer.state)+" svelte-1v9422j"),x(n,"ownerHere",t[2]),x(n,"serverDown",t[3]),$(s,"id","state"),$(s,"class",c=l(t[1].buzzer.state)+" svelte-1v9422j"),x(s,"ownerHere",t[2]),x(s,"serverDown",t[3])},m(e,t){a(e,n,t),a(e,r,t),a(e,s,t),y.m(s,null),a(e,i,t),z&&z.m(e,t),a(e,u,t),w&&w.m(e,t),a(e,f,t)},p(e,[t]){2&t&&o!==(o=l(e[1].buzzer.state)+" svelte-1v9422j")&&$(n,"class",o),6&t&&x(n,"ownerHere",e[2]),10&t&&x(n,"serverDown",e[3]),b===(b=h(e))&&y?y.p(e,t):(y.d(1),y=b(e),y&&(y.c(),y.m(s,null))),2&t&&c!==(c=l(e[1].buzzer.state)+" svelte-1v9422j")&&$(s,"class",c),6&t&&x(s,"ownerHere",e[2]),10&t&&x(s,"serverDown",e[3]),"Open"===e[1].buzzer.state?z?z.p(e,t):(z=De(e),z.c(),z.m(u.parentNode,u)):z&&(z.d(1),z=null),e[6]?w&&(w.d(1),w=null):w?w.p(e,t):(w=Fe(e),w.c(),w.m(f.parentNode,f))},i:e,o:e,d(e){e&&d(n),e&&d(r),e&&d(s),y.d(),e&&d(i),z&&z.d(e),e&&d(u),w&&w.d(e),e&&d(f)}}}function Qe(e){return 1e3===e?"normal":1001===e?"away":1002===e?"protocol":1003===e?"unsuppourted data":1006===e?"server shut down":1008===e?"policy":1009===e?"size":"unknown close code"}function Xe(e,t,n){let o,r,s,l,i,u,a;c(e,ee,(e=>n(0,r=e))),c(e,le,(e=>n(1,s=e))),c(e,re,(e=>n(3,l=e))),c(e,ce,(e=>n(4,i=e))),c(e,se,(e=>n(5,u=e))),c(e,te,(e=>n(6,a=e)));return e.$$.update=()=>{3&e.$$.dirty&&n(2,o=r.some((e=>e.name===s.buzzer.owner)))},[r,s,o,l,i,u,a,e=>"Click"===e.buzzKey&&!s.scores[e.name].blocked]}class Ye extends X{constructor(e){super(),Q(this,e,Xe,Ge,s,{})}}function Ze(e){let t,n;return{c(){t=m("span"),n=h(e[1]),$(t,"style",e[3])},m(e,o){a(e,t,o),u(t,n)},p(e,o){2&o&&y(n,e[1]),8&o&&$(t,"style",e[3])},d(e){e&&d(t)}}}function et(e){let t,n,r,s,c;return{c(){t=m("input"),n=p(),r=m("button"),r.textContent="üû¨",$(t,"class","hidden"),$(t,"style",e[3]),$(r,"class","remove svelte-yutqgt"),$(r,"title","remove player")},m(o,l){a(o,t,l),z(t,e[2]),a(o,n,l),a(o,r,l),s||(c=[b(t,"input",e[12]),b(t,"focusout",e[5]),b(t,"keydown",e[7]),b(r,"mousedown",e[6])],s=!0)},p(e,n){8&n&&$(t,"style",e[3]),4&n&&t.value!==e[2]&&z(t,e[2])},d(e){e&&d(t),e&&d(n),e&&d(r),s=!1,o(c)}}}function tt(t){let n,o,r,s,c,l;function i(e,t){return e[4]?et:Ze}let f=i(t),g=f(t);return{c(){n=m("span"),o=h(t[0]),r=h(":"),s=p(),g.c(),c=p(),l=m("br"),$(n,"style",t[3])},m(e,t){a(e,n,t),u(n,o),u(n,r),a(e,s,t),g.m(e,t),a(e,c,t),a(e,l,t)},p(e,[t]){1&t&&y(o,e[0]),8&t&&$(n,"style",e[3]),f===(f=i(e))&&g?g.p(e,t):(g.d(1),g=f(e),g&&(g.c(),g.m(c.parentNode,c)))},i:e,o:e,d(e){e&&d(n),e&&d(s),g.d(e),e&&d(c),e&&d(l)}}}function nt(e,t,n){let o,r,s,l,i,u;c(e,le,(e=>n(9,l=e))),c(e,ee,(e=>n(10,i=e))),c(e,te,(e=>n(4,u=e)));let{thisName:a}=t,{thisScore:d}=t,f="eceff4";function m(){ue.send(JSON.stringify({action:"SetScore",name:a,score:parseInt(o)}))}return e.$$set=e=>{"thisName"in e&&n(0,a=e.thisName),"thisScore"in e&&n(1,d=e.thisScore)},e.$$.update=()=>{2&e.$$.dirty&&n(2,o=d.toString()),1537&e.$$.dirty&&(l.scores[a].blocked?n(8,f="ebcb8b"):i.some((e=>e.name===a))?n(8,f="88c0d0"):n(8,f="eceff4")),1025&e.$$.dirty&&n(11,r=i.some((e=>e.name===a))?"bold":"normal"),2304&e.$$.dirty&&n(3,s=`color:#${f};font-weight:${r}`)},[a,d,o,s,u,m,function(){ue.send(JSON.stringify({action:"RemovePlayer",name:a}))},function(e){"Enter"==e.code&&m()},f,l,i,r,function(){o=this.value,n(2,o),n(1,d)}]}class ot extends X{constructor(e){super(),Q(this,e,nt,tt,s,{thisName:0,thisScore:1})}}function rt(e,t,n){const o=e.slice();return o[4]=t[n],o}function st(e){let t,n;return{c(){t=m("span"),t.textContent="scores",n=m("br"),$(t,"class","header")},m(e,o){a(e,t,o),a(e,n,o)},d(e){e&&d(t),e&&d(n)}}}function ct(e){let t,n;return{c(){t=m("span"),t.textContent="scores (click to edit)",n=m("br"),$(t,"class","header")},m(e,o){a(e,t,o),a(e,n,o)},d(e){e&&d(t),e&&d(n)}}}function lt(e,t){let n,o,r;return o=new ot({props:{thisName:t[4][0],thisScore:t[4][1].score}}),{key:e,first:null,c(){n=g(),W(o.$$.fragment),this.first=n},m(e,t){a(e,n,t),q(o,e,t),r=!0},p(e,n){t=e;const r={};4&n&&(r.thisName=t[4][0]),4&n&&(r.thisScore=t[4][1].score),o.$set(r)},i(e){r||(A(o.$$.fragment,e),r=!0)},o(e){V(o.$$.fragment,e),r=!1},d(e){e&&d(n),F(o,e)}}}function it(e){let t,n,o,r,s,c,l,i,u,f,h,g=[],$=new Map;function y(e,t){return e[1]?ct:st}let z=y(e),v=z(e),k=Object.entries(e[2].scores).sort(ut).reverse();const x=e=>e[4][0];for(let t=0;t<k.length;t+=1){let n=rt(e,k,t),o=x(n);$.set(o,g[t]=lt(o,n))}return{c(){t=m("hr"),n=p(),v.c(),o=p(),r=m("button"),r.innerHTML="view score <u>h</u>istory",s=p(),c=m("br"),l=p(),i=m("div");for(let e=0;e<g.length;e+=1)g[e].c();w(i,"text-align","right"),w(i,"display","inline-block")},m(d,m){a(d,t,m),a(d,n,m),v.m(d,m),a(d,o,m),a(d,r,m),a(d,s,m),a(d,c,m),a(d,l,m),a(d,i,m);for(let e=0;e<g.length;e+=1)g[e].m(i,null);u=!0,f||(h=b(r,"click",e[3]),f=!0)},p(e,[t]){z!==(z=y(e))&&(v.d(1),v=z(e),v&&(v.c(),v.m(o.parentNode,o))),4&t&&(k=Object.entries(e[2].scores).sort(ut).reverse(),P(),g=function(e,t,n,o,r,s,c,l,i,u,a,d){let f=e.length,m=s.length,h=f;const p={};for(;h--;)p[e[h].key]=h;const g=[],b=new Map,$=new Map;for(h=m;h--;){const e=d(r,s,h),l=n(e);let i=c.get(l);i?o&&i.p(e,t):(i=u(l,e),i.c()),b.set(l,g[h]=i),l in p&&$.set(l,Math.abs(h-p[l]))}const y=new Set,z=new Set;function w(e){A(e,1),e.m(l,a),c.set(e.key,e),a=e.first,m--}for(;f&&m;){const t=g[m-1],n=e[f-1],o=t.key,r=n.key;t===n?(a=t.first,f--,m--):b.has(r)?!c.has(o)||y.has(o)?w(t):z.has(r)?f--:$.get(o)>$.get(r)?(z.add(o),w(t)):(y.add(r),f--):(i(n,c),f--)}for(;f--;){const t=e[f];b.has(t.key)||i(t,c)}for(;m;)w(g[m-1]);return g}(g,t,x,1,e,k,$,i,U,lt,null,rt),R())},i(e){if(!u){for(let e=0;e<k.length;e+=1)A(g[e]);u=!0}},o(e){for(let e=0;e<g.length;e+=1)V(g[e]);u=!1},d(e){e&&d(t),e&&d(n),v.d(e),e&&d(o),e&&d(r),e&&d(s),e&&d(c),e&&d(l),e&&d(i);for(let e=0;e<g.length;e+=1)g[e].d();f=!1,h()}}}const ut=(e,t)=>e[1].score-t[1].score;function at(e,t,n){let o,r,s;c(e,ne,(e=>n(0,o=e))),c(e,te,(e=>n(1,r=e))),c(e,le,(e=>n(2,s=e))),document.addEventListener("keydown",(function(e){"h"===e.key&&i(ne,o=!0,o)}));return[o,r,s,()=>i(ne,o=!0,o)]}class dt extends X{constructor(e){super(),Q(this,e,at,it,s,{})}}function ft(e,t,n){const o=e.slice();return o[14]=t[n],o}function mt(e){let t,n,o,r=e[14]+"";return{c(){t=m("option"),n=h(r),t.__value=o=e[14],t.value=t.__value},m(e,o){a(e,t,o),u(t,n)},p(e,s){2&s&&r!==(r=e[14]+"")&&y(n,r),2&s&&o!==(o=e[14])&&(t.__value=o,t.value=t.__value)},d(e){e&&d(t)}}}function ht(e){let t,n,r,s,c,l,i,f,g,$,z=e[3].buzzer.owner+"";return{c(){t=h("is "),n=m("strong"),r=h(z),s=p(),c=m("button"),c.innerHTML="<u>c</u>orrect",l=h(" or\n    "),i=m("button"),i.innerHTML="<u>i</u>ncorrect",f=h("?")},m(o,d){a(o,t,d),a(o,n,d),u(n,r),a(o,s,d),a(o,c,d),a(o,l,d),a(o,i,d),a(o,f,d),g||($=[b(c,"mousedown",e[9]),b(i,"mousedown",e[10])],g=!0)},p(e,t){8&t&&z!==(z=e[3].buzzer.owner+"")&&y(r,z)},d(e){e&&d(t),e&&d(n),e&&d(s),e&&d(c),e&&d(l),e&&d(i),e&&d(f),g=!1,o($)}}}function pt(t){let n,o,r;return{c(){n=m("button"),n.innerHTML="<u>o</u>pen buzzer",$(n,"class","large")},m(e,s){a(e,n,s),o||(r=b(n,"mousedown",t[10]),o=!0)},p:e,d(e){e&&d(n),o=!1,r()}}}function gt(t){let n,o,r;return{c(){n=m("button"),n.innerHTML="<u>e</u>nd round early",$(n,"class","large")},m(e,s){a(e,n,s),o||(r=b(n,"mousedown",t[8]),o=!0)},p:e,d(e){e&&d(n),o=!1,r()}}}function bt(t){let n,r,s,c,l,i,z,w,k,x,N,S,C,_,O,E,T,j,L,H,B,J,M,K,P,R,A,V,D=t[1]?"‚òë":"‚òê",U=t[1]?t[5]:t[4],W=[];for(let e=0;e<U.length;e+=1)W[e]=mt(ft(t,U,e));function q(e,t){return"Open"===e[3].buzzer.state?gt:"Closed"===e[3].buzzer.state?pt:"TakenBy"===e[3].buzzer.state?ht:void 0}let F=q(t),G=F&&F(t);return{c(){n=m("hr"),r=p(),s=m("span"),s.textContent="host commands",c=m("br"),l=h("\n\npoints worth:\n\n"),i=m("select");for(let e=0;e<W.length;e+=1)W[e].c();z=p(),w=m("button"),k=m("u"),k.textContent="+",N=p(),S=m("button"),C=m("u"),C.textContent="-",O=p(),E=m("br"),T=p(),j=m("button"),L=h(D),H=p(),B=m("u"),B.textContent="d",J=h("ouble Jeopardy!"),M=p(),K=m("br"),P=p(),G&&G.c(),R=g(),$(s,"class","header"),$(i,"type","number"),void 0===t[2]&&I((()=>t[12].call(i))),w.disabled=x=t[0]>3,S.disabled=_=t[0]<1},m(e,o){a(e,n,o),a(e,r,o),a(e,s,o),a(e,c,o),a(e,l,o),a(e,i,o);for(let e=0;e<W.length;e+=1)W[e].m(i,null);v(i,t[2]),a(e,z,o),a(e,w,o),u(w,k),a(e,N,o),a(e,S,o),u(S,C),a(e,O,o),a(e,E,o),a(e,T,o),a(e,j,o),u(j,L),u(j,H),u(j,B),u(j,J),a(e,M,o),a(e,K,o),a(e,P,o),G&&G.m(e,o),a(e,R,o),A||(V=[b(i,"change",t[12]),b(w,"mousedown",t[6]),b(S,"mousedown",t[7]),b(j,"mousedown",t[13])],A=!0)},p(e,[t]){if(50&t){let n;for(U=e[1]?e[5]:e[4],n=0;n<U.length;n+=1){const o=ft(e,U,n);W[n]?W[n].p(o,t):(W[n]=mt(o),W[n].c(),W[n].m(i,null))}for(;n<W.length;n+=1)W[n].d(1);W.length=U.length}54&t&&v(i,e[2]),1&t&&x!==(x=e[0]>3)&&(w.disabled=x),1&t&&_!==(_=e[0]<1)&&(S.disabled=_),2&t&&D!==(D=e[1]?"‚òë":"‚òê")&&y(L,D),F===(F=q(e))&&G?G.p(e,t):(G&&G.d(1),G=F&&F(e),G&&(G.c(),G.m(R.parentNode,R)))},i:e,o:e,d(e){e&&d(n),e&&d(r),e&&d(s),e&&d(c),e&&d(l),e&&d(i),f(W,e),e&&d(z),e&&d(w),e&&d(N),e&&d(S),e&&d(O),e&&d(E),e&&d(T),e&&d(j),e&&d(M),e&&d(K),e&&d(P),G&&G.d(e),e&&d(R),A=!1,o(V)}}}function $t(e,t,n){let o,r;c(e,le,(e=>n(3,r=e)));let{pointValuesIndex:s=0}=t;const l=[200,400,600,800,1e3],u=[400,800,1200,1600,2e3];let a,d=!1;function f(){n(0,s++,s),n(0,s%=5)}function m(){n(0,s--,s)}function h(){ue.send(JSON.stringify({action:"EndRound"})),f()}function p(){ue.send(JSON.stringify({action:"OwnerCorrect"})),f()}function g(){Object.entries(r.scores).every((e=>e[1].blocked))&&f(),ue.send(JSON.stringify({action:"OpenBuzzer"}))}document.addEventListener("keydown",(function(e){"INPUT"!==document.activeElement.nodeName&&("Open"===r.buzzer.state&&"e"===e.key?h():"Closed"===r.buzzer.state&&"o"===e.key?g():"TakenBy"===r.buzzer.state&&"c"===e.key?p():"TakenBy"===r.buzzer.state&&"i"===e.key?g():"d"===e.key?(n(1,d=!d),n(0,s=0)):"+"===e.key&&s<4?f():"-"===e.key&&s>0&&m())}));return e.$$set=e=>{"pointValuesIndex"in e&&n(0,s=e.pointValuesIndex)},e.$$.update=()=>{3&e.$$.dirty&&n(2,o=d?u[s]:l[s]),4&e.$$.dirty&&ue.send(JSON.stringify({action:"SetPtsWorth",pts:o})),2056&e.$$.dirty&&("Open"===r.buzzer.state?n(11,a=window.setTimeout((function(){for(var e of(console.log("ending round due to timeout"),Object.entries(r.scores)))e[1].blocked=!1;i(le,r.buzzer.state="Closed",r),f()}),5e3)):(console.log("clearing timeout"),window.clearTimeout(a)))},[s,d,o,r,l,u,f,m,h,p,g,a,function(){o=k(this),n(2,o),n(1,d),n(0,s),n(1,d),n(5,u),n(4,l)},()=>{n(1,d=!d),n(0,s=0)}]}class yt extends X{constructor(e){super(),Q(this,e,$t,bt,s,{pointValuesIndex:0})}}function zt(e,t,n){const o=e.slice();return o[11]=t[n],o[12]=t,o[13]=n,o}function wt(e){let t,n,o,r,s;function c(){e[7].call(t,e[12],e[13])}return{c(){t=m("input"),n=p(),o=m("br"),$(t,"placeholder","enter your name")},m(l,i){a(l,t,i),z(t,e[11].name),a(l,n,i),a(l,o,i),r||(s=b(t,"input",c),r=!0)},p(n,o){e=n,1&o&&t.value!==e[11].name&&z(t,e[11].name)},d(e){e&&d(t),e&&d(n),e&&d(o),r=!1,s()}}}function vt(e){let t,n;return{c(){t=m("br"),n=m("strong"),n.textContent="some of these names are taken",$(n,"id","dup"),$(n,"class","svelte-1ge8e94")},m(e,o){a(e,t,o),a(e,n,o)},d(e){e&&d(t),e&&d(n)}}}function kt(t){let n,r,s,c,l,i,g,z,v,k,x,N,S,C,_,O,E,T,j,I,L,H,B,J,M,K,P,R,A,V=t[2]?"‚òë":"‚òê",D=t[0],U=[];for(let e=0;e<D.length;e+=1)U[e]=wt(zt(t,D,e));let W=t[1]&&vt();return{c(){n=h("contestant(s), enter your name(s)"),r=m("br"),s=p(),c=m("strong"),c.textContent="hosts do not need to enter their names",l=p(),i=m("hr"),g=p();for(let e=0;e<U.length;e+=1)U[e].c();z=p(),v=m("button"),v.textContent="add contestant",k=p(),x=m("button"),N=h("remove contestant"),C=p(),W&&W.c(),_=p(),O=m("hr"),E=h("\ndoes this device need host access?"),T=m("br"),j=p(),I=m("button"),L=h(V),H=h("\n    host access"),B=p(),J=m("hr"),M=p(),K=m("button"),P=h("play"),w(c,"color","#88c0d0"),x.disabled=S=0===t[0].length,$(K,"class","large"),K.disabled=t[1]},m(e,o){a(e,n,o),a(e,r,o),a(e,s,o),a(e,c,o),a(e,l,o),a(e,i,o),a(e,g,o);for(let t=0;t<U.length;t+=1)U[t].m(e,o);a(e,z,o),a(e,v,o),a(e,k,o),a(e,x,o),u(x,N),a(e,C,o),W&&W.m(e,o),a(e,_,o),a(e,O,o),a(e,E,o),a(e,T,o),a(e,j,o),a(e,I,o),u(I,L),u(I,H),a(e,B,o),a(e,J,o),a(e,M,o),a(e,K,o),u(K,P),R||(A=[b(v,"mousedown",t[3]),b(x,"mousedown",t[4]),b(I,"mousedown",t[8]),b(K,"mousedown",t[5])],R=!0)},p(e,[t]){if(1&t){let n;for(D=e[0],n=0;n<D.length;n+=1){const o=zt(e,D,n);U[n]?U[n].p(o,t):(U[n]=wt(o),U[n].c(),U[n].m(z.parentNode,z))}for(;n<U.length;n+=1)U[n].d(1);U.length=D.length}1&t&&S!==(S=0===e[0].length)&&(x.disabled=S),e[1]?W||(W=vt(),W.c(),W.m(_.parentNode,_)):W&&(W.d(1),W=null),4&t&&V!==(V=e[2]?"‚òë":"‚òê")&&y(L,V),2&t&&(K.disabled=e[1])},i:e,o:e,d(e){e&&d(n),e&&d(r),e&&d(s),e&&d(c),e&&d(l),e&&d(i),e&&d(g),f(U,e),e&&d(z),e&&d(v),e&&d(k),e&&d(x),e&&d(C),W&&W.d(e),e&&d(_),e&&d(O),e&&d(E),e&&d(T),e&&d(j),e&&d(I),e&&d(B),e&&d(J),e&&d(M),e&&d(K),R=!1,o(A)}}}function xt(e,t,n){let o,r,s,l,u;c(e,ee,(e=>n(0,r=e))),c(e,oe,(e=>n(10,s=e))),c(e,le,(e=>n(6,l=e))),c(e,te,(e=>n(2,u=e)));let a=r.length;return e.$$.update=()=>{65&e.$$.dirty&&n(1,o=r.some((e=>Object.entries(l.scores).some((t=>t[0]===e.name)))))},[r,o,u,function(){i(ee,r=[...r,{name:"",buzzKey:ae[a].code}],r),a++},function(){r.pop(),ee.set(r),a--},function(){for(var e of r)e.name=e.name.trim();i(ee,r=r.filter((e=>!!e.name)),r);for(const e of r)ue.send(JSON.stringify({action:"AddPlayer",name:e.name}));i(oe,s=!1,s)},l,function(e,t){e[t].name=this.value,ee.set(r)},()=>i(te,u=!u,u)]}class Nt extends X{constructor(e){super(),Q(this,e,xt,kt,s,{})}}const{window:St}=D;function Ct(e){let t,n,o,r,s,c,l,i,u;t=new Ye({}),o=new Je({});let f=e[2]&&Ot(e);const m=[Tt,Et],h=[];function b(e,t){return e[3]?0:1}return c=b(e),l=h[c]=m[c](e),{c(){W(t.$$.fragment),n=p(),W(o.$$.fragment),r=p(),f&&f.c(),s=p(),l.c(),i=g()},m(e,l){q(t,e,l),a(e,n,l),q(o,e,l),a(e,r,l),f&&f.m(e,l),a(e,s,l),h[c].m(e,l),a(e,i,l),u=!0},p(e,t){e[2]?f?(f.p(e,t),4&t&&A(f,1)):(f=Ot(e),f.c(),A(f,1),f.m(s.parentNode,s)):f&&(P(),V(f,1,1,(()=>{f=null})),R());let n=c;c=b(e),c!==n&&(P(),V(h[n],1,1,(()=>{h[n]=null})),R(),l=h[c],l||(l=h[c]=m[c](e),l.c()),A(l,1),l.m(i.parentNode,i))},i(e){u||(A(t.$$.fragment,e),A(o.$$.fragment,e),A(f),A(l),u=!0)},o(e){V(t.$$.fragment,e),V(o.$$.fragment,e),V(f),V(l),u=!1},d(e){F(t,e),e&&d(n),F(o,e),e&&d(r),f&&f.d(e),e&&d(s),h[c].d(e),e&&d(i)}}}function _t(t){let n,o;return n=new Nt({}),{c(){W(n.$$.fragment)},m(e,t){q(n,e,t),o=!0},p:e,i(e){o||(A(n.$$.fragment,e),o=!0)},o(e){V(n.$$.fragment,e),o=!1},d(e){F(n,e)}}}function Ot(e){let t,n;return t=new yt({props:{pointValuesIndex:e[0]}}),{c(){W(t.$$.fragment)},m(e,o){q(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.pointValuesIndex=e[0]),t.$set(o)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function Et(e){let t,n;return t=new dt({}),{c(){W(t.$$.fragment)},m(e,o){q(t,e,o),n=!0},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function Tt(e){let t,n;return t=new ke({}),{c(){W(t.$$.fragment)},m(e,o){q(t,e,o),n=!0},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function jt(e){let t,n,r,s,c,l,i;const u=[_t,Ct],f=[];function h(e,t){return e[1]?0:1}return t=h(e),n=f[t]=u[t](e),{c(){n.c(),r=p(),s=m("div"),s.textContent="v5.1.2",$(s,"id","footer"),$(s,"class","svelte-1jsgb2m")},m(n,o){f[t].m(n,o),a(n,r,o),a(n,s,o),c=!0,l||(i=[b(St,"mousedown",e[4]),b(St,"keydown",e[5]),b(St,"touchstart",e[4])],l=!0)},p(e,[o]){let s=t;t=h(e),t===s?f[t].p(e,o):(P(),V(f[s],1,1,(()=>{f[s]=null})),R(),n=f[t],n?n.p(e,o):(n=f[t]=u[t](e),n.c()),A(n,1),n.m(r.parentNode,r))},i(e){c||(A(n),c=!0)},o(e){V(n),c=!1},d(e){f[t].d(e),e&&d(r),e&&d(s),l=!1,o(i)}}}function It(e,t,n){let o,r,s,l,u,a,d,f,m;function h(e,t){const n=new Date;i(le,o.history=[{time:[n.getHours(),n.getMinutes()],name:e,score:t},...o.history],o)}c(e,le,(e=>n(8,o=e))),c(e,re,(e=>n(9,r=e))),c(e,se,(e=>n(10,s=e))),c(e,ce,(e=>n(11,l=e))),c(e,ee,(e=>n(12,u=e))),c(e,oe,(e=>n(1,a=e))),c(e,te,(e=>n(2,d=e))),c(e,ne,(e=>n(3,f=e)));let p=0;function g(e){o.scores[e.name].blocked||ue.send(JSON.stringify({action:"Buzz",name:e.name}))}return ue.onmessage=function(e){let t=JSON.parse(e.data),r=t.action;if("SetScore"===r){let e=o.scores[t.name];e.score=t.score,h(t.name,e.score)}else if("EndRound"===r){for(var s of Object.entries(o.scores))s[1].blocked=!1;i(le,o.buzzer.state="Closed",o),window.clearTimeout(m)}else if("OpenBuzzer"===r)Object.values(o.scores).every((e=>e.blocked))?(i(le,o.buzzer.state="Closed",o),Object.values(o.scores).map((e=>e.blocked=!1))):i(le,o.buzzer.state="Open",o),m=window.setTimeout((function(){for(var e of(console.log("ending round due to timeout"),Object.entries(o.scores)))e[1].blocked=!1;i(le,o.buzzer.state="Closed",o),n(0,p++,p),n(0,p%=5)}),5e3);else if("AddPlayer"===r){let e=o.history.find((e=>e.name===t.name)),n=void 0===e?0:e.score;i(le,o.scores[t.name]={score:n,blocked:!1},o),h(t.name,n)}else if("RemovePlayer"===r)delete o.scores[t.name],le.set(o);else if("Unblock"===r)i(le,o.scores[t.name].blocked=!1,o);else if("EditHistory"===r){let e=o.history[t.index],n=t.score-e.score;i(le,o.scores[e.name].score+=n,o);for(const r of ie(0,t.index))o.history[r].name===e.name&&i(le,o.history[r].score+=n,o)}else if("RemoveHistory"===r){let e=o.history[t.index],n=o.history.slice(t.index+1).find((t=>t.name===e.name)).score;void 0===n&&(n=0);let r=e.score-n;i(le,o.scores[e.name].score-=r,o),o.history.splice(t.index,1),le.set(o);for(const n of ie(0,t.index-1))o.history[n].name===e.name&&i(le,o.history[n].score-=r,o)}else if("SetPtsWorth"===r)i(le,o.ptsworth=t.pts,o);else if("OwnerCorrect"===r){let e=o.scores[o.buzzer.owner];e.score+=o.ptsworth,h(o.buzzer.owner,e.score),Object.values(o.scores).map((e=>e.blocked=!1)),i(le,o.buzzer.state="Closed",o)}else"SetState"===r?i(le,o=t.state,o):"Buzz"===r&&(i(le,o.scores[t.name].blocked=!0,o),i(le,o.buzzer={state:"TakenBy",owner:t.name},o),window.clearTimeout(m))},ue.onclose=function(e){i(re,r=!0,r),i(se,s=e.reason,s),i(ce,l=e.code,l)},[p,a,d,f,function(e){let t=e.target,n=e.srcElement,o=["INPUT","BUTTON","SELECT"];if(!o.includes(t.tagName)&&!o.includes(n.tagName))for(const e of u)"Click"===e.buzzKey&&g(e)},function(e){for(const t of u)t.buzzKey===e.code&&g(t)}]}return new class extends X{constructor(e){super(),Q(this,e,It,jt,s,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
