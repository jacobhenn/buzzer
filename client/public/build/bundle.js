var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function r(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(t,n,o){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function l(e){return null==e?"":e}function u(e,t,n=t){return e.set(n),t}function i(e,t){e.appendChild(t)}function a(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function h(){return p(" ")}function g(){return p("")}function $(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function b(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function v(e,t){e.value=null==t?"":t}function z(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}function w(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}}function k(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function x(e,t,n){e.classList[n?"add":"remove"](t)}let S;function N(e){S=e}const O=[],C=[],_=[],E=[],T=Promise.resolve();let H=!1;function L(e){_.push(e)}let j=!1;const J=new Set;function P(){if(!j){j=!0;do{for(let e=0;e<O.length;e+=1){const t=O[e];N(t),B(t.$$)}for(N(null),O.length=0;C.length;)C.pop()();for(let e=0;e<_.length;e+=1){const t=_[e];J.has(t)||(J.add(t),t())}_.length=0}while(O.length);for(;E.length;)E.pop()();H=!1,j=!1,J.clear()}}function B(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L)}}const I=new Set;let M;function R(){M={r:0,c:[],p:M}}function K(){M.r||o(M.c),M=M.p}function A(e,t){e&&e.i&&(I.delete(e),e.i(t))}function D(e,t,n,o){if(e&&e.o){if(I.has(e))return;I.add(e),M.c.push((()=>{I.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}const U="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function W(e,t){D(e,1,1,(()=>{t.delete(e.key)}))}function q(e){e&&e.c()}function F(e,n,c){const{fragment:s,on_mount:l,on_destroy:u,after_update:i}=e.$$;s&&s.m(n,c),L((()=>{const n=l.map(t).filter(r);u?u.push(...n):o(n),e.$$.on_mount=[]})),i.forEach(L)}function G(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(e,t){-1===e.$$.dirty[0]&&(O.push(e),H||(H=!0,T.then(P)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function V(t,r,c,s,l,u,i=[-1]){const a=S;N(t);const f=r.props||{},m=t.$$={fragment:null,ctx:null,props:u,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:n(),dirty:i,skip_bound:!1};let p=!1;if(m.ctx=c?c(t,f,((e,n,...o)=>{const r=o.length?o[0]:n;return m.ctx&&l(m.ctx[e],m.ctx[e]=r)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](r),p&&Q(t,e)),n})):[],m.update(),p=!0,o(m.before_update),m.fragment=!!s&&s(m.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);m.fragment&&m.fragment.l(e),e.forEach(d)}else m.fragment&&m.fragment.c();r.intro&&A(t.$$.fragment),F(t,r.target,r.anchor),P()}N(a)}class X{$destroy(){G(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var Y;!function(e){e[e.Setup=0]="Setup",e[e.Contestant=1]="Contestant",e[e.Host=2]="Host",e[e.Operator=3]="Operator",e[e.Over=4]="Over"}(Y||(Y={}));const Z=[];function ee(t,n=e){let o;const r=[];function s(e){if(c(t,e)&&(t=e,o)){const e=!Z.length;for(let e=0;e<r.length;e+=1){const n=r[e];n[1](),Z.push(n,t)}if(e){for(let e=0;e<Z.length;e+=2)Z[e][0](Z[e+1]);Z.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(c,l=e){const u=[c,l];return r.push(u),1===r.length&&(o=n(s)||e),c(t),()=>{const e=r.indexOf(u);-1!==e&&r.splice(e,1),0===r.length&&(o(),o=null)}}}}const te=ee([{name:"",buzzKey:"Space",added:!1}]),ne=ee(Y.Setup),oe=ee(!1),re=ee(""),ce=ee(0),se=ee(0),le=ee({buzzer:{state:"Closed",owner:null},scores:{},history:[],ptsworth:200});function ue(e,t){return Array.from({length:t-e+1},((e,t)=>t))}const ie=new WebSocket(`ws://${window.location.host}/ws`),ae=[{code:"Space",name:"Space"},{code:"NumpadEnter",name:"Numpad Enter"},{code:"ControlLeft",name:"Left Control"},{code:"Numpad0",name:"Numpad 0"},{code:"ShiftLeft",name:"Left Shift"},{code:"ShiftRight",name:"Right Shift"},{code:"Enter",name:"Enter"},{code:"ControlRight",name:"Right Control"}];function de(e,t,n){const o=e.slice();return o[10]=t[n][0],o[11]=t[n][1],o}function fe(e){let t,n,o,r,c=e[10]+"",s=e[11]+"";return{c(){t=p(c),n=p(": "),o=p(s),r=m("br")},m(e,c){a(e,t,c),a(e,n,c),a(e,o,c),a(e,r,c)},p(e,n){1&n&&c!==(c=e[10]+"")&&y(t,c),1&n&&s!==(s=e[11]+"")&&y(o,s)},d(e){e&&d(t),e&&d(n),e&&d(o),e&&d(r)}}}function me(t){let n,r,c,s,l,u,g,b,z,w,k,x,S,N,O,C,_,E,T,H,L,j,J,P=t[3]?"‚òë":"‚òê",B=Object.entries(t[0]),I=[];for(let e=0;e<B.length;e+=1)I[e]=fe(de(t,B,e));return{c(){n=m("hr"),r=h(),c=m("u"),c.textContent="send custom command",s=m("br"),l=h();for(let e=0;e<I.length;e+=1)I[e].c();u=h(),g=m("input"),b=h(),z=m("input"),w=h(),k=m("button"),x=p(P),S=p(" int"),N=h(),O=m("br"),C=h(),_=m("button"),_.textContent="add field",E=h(),T=m("button"),T.textContent="reset",H=h(),L=m("button"),L.textContent="send"},m(e,o){a(e,n,o),a(e,r,o),a(e,c,o),a(e,s,o),a(e,l,o);for(let t=0;t<I.length;t+=1)I[t].m(e,o);a(e,u,o),a(e,g,o),v(g,t[1]),a(e,b,o),a(e,z,o),v(z,t[2]),a(e,w,o),a(e,k,o),i(k,x),i(k,S),a(e,N,o),a(e,O,o),a(e,C,o),a(e,_,o),a(e,E,o),a(e,T,o),a(e,H,o),a(e,L,o),j||(J=[$(g,"input",t[7]),$(z,"input",t[8]),$(k,"click",t[9]),$(_,"click",t[6]),$(T,"click",t[4]),$(L,"click",t[5])],j=!0)},p(e,[t]){if(1&t){let n;for(B=Object.entries(e[0]),n=0;n<B.length;n+=1){const o=de(e,B,n);I[n]?I[n].p(o,t):(I[n]=fe(o),I[n].c(),I[n].m(u.parentNode,u))}for(;n<I.length;n+=1)I[n].d(1);I.length=B.length}2&t&&g.value!==e[1]&&v(g,e[1]),4&t&&z.value!==e[2]&&v(z,e[2]),8&t&&P!==(P=e[3]?"‚òë":"‚òê")&&y(x,P)},i:e,o:e,d(e){e&&d(n),e&&d(r),e&&d(c),e&&d(s),e&&d(l),f(I,e),e&&d(u),e&&d(g),e&&d(b),e&&d(z),e&&d(w),e&&d(k),e&&d(N),e&&d(O),e&&d(C),e&&d(_),e&&d(E),e&&d(T),e&&d(H),e&&d(L),j=!1,o(J)}}}function pe(e,t,n){let o={},r="action",c="",s=!1;function l(){n(0,o={}),n(1,r="action"),n(2,c=""),n(3,s=!1)}return[o,r,c,s,l,function(){ie.send(JSON.stringify(o)),l()},function(){n(0,o[r]=s?parseInt(c):c,o),n(1,r=""),n(2,c="")},function(){r=this.value,n(1,r)},function(){c=this.value,n(2,c)},()=>n(3,s=!s)]}class he extends X{constructor(e){super(),V(this,e,pe,me,c,{})}}function ge(e){let t;return{c(){t=p(e[2])},m(e,n){a(e,t,n)},p(e,n){4&n&&y(t,e[2])},d(e){e&&d(t)}}}function $e(e){let t,n,r,c,s;return{c(){t=m("input"),n=h(),r=m("button"),r.textContent="üû¨",b(t,"class","hidden svelte-k85431"),b(r,"class","remove svelte-k85431")},m(o,l){a(o,t,l),v(t,e[2]),a(o,n,l),a(o,r,l),c||(s=[$(t,"input",e[8]),$(t,"blur",e[4]),$(t,"keydown",e[6]),$(r,"mousedown",e[5])],c=!0)},p(e,n){4&n&&t.value!==e[2]&&v(t,e[2])},d(e){e&&d(t),e&&d(n),e&&d(r),c=!1,o(s)}}}function be(t){let n,o,r,c,s,l,u,f,$=t[1].history[t[0]].time[0].toString().padStart(2,"0")+"",v=t[1].history[t[0]].time[1].toString().padStart(2,"0")+"",z=t[1].history[t[0]].name+"";function w(e,t){return e[3]===Y.Host?$e:ge}let k=w(t),x=k(t);return{c(){n=m("span"),o=p($),r=p(":"),c=p(v),s=h(),l=p(z),u=h(),x.c(),f=g(),b(n,"class","time svelte-k85431")},m(e,t){a(e,n,t),i(n,o),i(n,r),i(n,c),a(e,s,t),a(e,l,t),a(e,u,t),x.m(e,t),a(e,f,t)},p(e,[t]){3&t&&$!==($=e[1].history[e[0]].time[0].toString().padStart(2,"0")+"")&&y(o,$),3&t&&v!==(v=e[1].history[e[0]].time[1].toString().padStart(2,"0")+"")&&y(c,v),3&t&&z!==(z=e[1].history[e[0]].name+"")&&y(l,z),k===(k=w(e))&&x?x.p(e,t):(x.d(1),x=k(e),x&&(x.c(),x.m(f.parentNode,f)))},i:e,o:e,d(e){e&&d(n),e&&d(s),e&&d(l),e&&d(u),x.d(e),e&&d(f)}}}function ye(e,t,n){let o,r,c,l;s(e,le,(e=>n(1,c=e))),s(e,ne,(e=>n(3,l=e)));let{thisIndex:u}=t;function i(){ie.send(JSON.stringify({action:"EditHistory",index:u,delta:parseInt(r)}))}return e.$$set=e=>{"thisIndex"in e&&n(0,u=e.thisIndex)},e.$$.update=()=>{3&e.$$.dirty&&n(7,o=c.history[u].delta),128&e.$$.dirty&&n(2,r=(o<0?"":"+")+o.toString())},[u,c,r,l,i,function(){ie.send(JSON.stringify({action:"RemoveHistory",index:u}))},function(e){"Enter"===e.code&&i()},o,function(){r=this.value,n(2,r),n(7,o),n(1,c),n(0,u)}]}class ve extends X{constructor(e){super(),V(this,e,ye,be,c,{thisIndex:0})}}function ze(e,t,n){const o=e.slice();return o[6]=t[n],o}function we(e){let t,n;return{c(){t=m("span"),t.textContent="score history",n=m("br"),b(t,"class","header")},m(e,o){a(e,t,o),a(e,n,o)},d(e){e&&d(t),e&&d(n)}}}function ke(e){let t,n;return{c(){t=m("span"),t.textContent="score history (click to edit)",n=m("br"),b(t,"class","header")},m(e,o){a(e,t,o),a(e,n,o)},d(e){e&&d(t),e&&d(n)}}}function xe(e){let t,n,o;return t=new ve({props:{thisIndex:e[6]}}),{c(){q(t.$$.fragment),n=m("br")},m(e,r){F(t,e,r),a(e,n,r),o=!0},p(e,n){const o={};8&n&&(o.thisIndex=e[6]),t.$set(o)},i(e){o||(A(t.$$.fragment,e),o=!0)},o(e){D(t.$$.fragment,e),o=!1},d(e){G(t,e),e&&d(n)}}}function Se(e){let t,n,o=""===e[0]||e[3].history[e[6]].name.startsWith(e[0]),r=o&&xe(e);return{c(){r&&r.c(),t=g()},m(e,o){r&&r.m(e,o),a(e,t,o),n=!0},p(e,n){9&n&&(o=""===e[0]||e[3].history[e[6]].name.startsWith(e[0])),o?r?(r.p(e,n),9&n&&A(r,1)):(r=xe(e),r.c(),A(r,1),r.m(t.parentNode,t)):r&&(R(),D(r,1,1,(()=>{r=null})),K())},i(e){n||(A(r),n=!0)},o(e){D(r),n=!1},d(e){r&&r.d(e),e&&d(t)}}}function Ne(e){let t,n,r,c,s,l,u,i,p,g,y,w,k;function x(e,t){return e[2]===Y.Host?ke:we}let S=x(e),N=S(e),O=ue(0,e[3].history.length-1),C=[];for(let t=0;t<O.length;t+=1)C[t]=Se(ze(e,O,t));const _=e=>D(C[e],1,1,(()=>{C[e]=null}));return{c(){t=m("hr"),n=h(),N.c(),r=h(),c=m("button"),c.innerHTML="‚Üê <u>b</u>ack to current scores\n",s=m("br"),l=h(),u=m("input"),i=m("br"),p=h(),g=m("div");for(let e=0;e<C.length;e+=1)C[e].c();b(u,"placeholder","filter by player name"),z(g,"text-align","right"),z(g,"display","inline-block")},m(o,d){a(o,t,d),a(o,n,d),N.m(o,d),a(o,r,d),a(o,c,d),a(o,s,d),a(o,l,d),a(o,u,d),v(u,e[0]),a(o,i,d),a(o,p,d),a(o,g,d);for(let e=0;e<C.length;e+=1)C[e].m(g,null);y=!0,w||(k=[$(c,"click",e[4]),$(u,"input",e[5])],w=!0)},p(e,[t]){if(S!==(S=x(e))&&(N.d(1),N=S(e),N&&(N.c(),N.m(r.parentNode,r))),1&t&&u.value!==e[0]&&v(u,e[0]),9&t){let n;for(O=ue(0,e[3].history.length-1),n=0;n<O.length;n+=1){const o=ze(e,O,n);C[n]?(C[n].p(o,t),A(C[n],1)):(C[n]=Se(o),C[n].c(),A(C[n],1),C[n].m(g,null))}for(R(),n=O.length;n<C.length;n+=1)_(n);K()}},i(e){if(!y){for(let e=0;e<O.length;e+=1)A(C[e]);y=!0}},o(e){C=C.filter(Boolean);for(let e=0;e<C.length;e+=1)D(C[e]);y=!1},d(e){e&&d(t),e&&d(n),N.d(e),e&&d(r),e&&d(c),e&&d(s),e&&d(l),e&&d(u),e&&d(i),e&&d(p),e&&d(g),f(C,e),w=!1,o(k)}}}function Oe(e,t,n){let o,r,c;s(e,oe,(e=>n(1,o=e))),s(e,ne,(e=>n(2,r=e))),s(e,le,(e=>n(3,c=e)));let l="";document.addEventListener("keydown",(function(e){"b"===e.key&&"INPUT"!==document.activeElement.nodeName&&u(oe,o=!1,o)}));return[l,o,r,c,()=>u(oe,o=!1,o),function(){l=this.value,n(0,l)}]}class Ce extends X{constructor(e){super(),V(this,e,Oe,Ne,c,{})}}function _e(e,t,n){const o=e.slice();return o[4]=t[n],o}function Ee(t){let n,o,r,c=t[4].name+"";return{c(){n=m("option"),o=p(c),r=h(),n.__value=t[4].code,n.value=n.__value},m(e,t){a(e,n,t),i(n,o),i(n,r)},p:e,d(e){e&&d(n)}}}function Te(e){let t;return{c(){t=m("option"),t.textContent="Tap/Click",t.__value="Click",t.value=t.__value},m(e,n){a(e,t,n)},d(e){e&&d(t)}}}function He(t){let n,r,c,s,l=!t[1].some(t[2]),u=ae,p=[];for(let e=0;e<u.length;e+=1)p[e]=Ee(_e(t,u,e));let h=l&&Te();return{c(){n=m("select");for(let e=0;e<p.length;e+=1)p[e].c();r=g(),h&&h.c(),void 0===t[0].buzzKey&&L((()=>t[3].call(n)))},m(e,o){a(e,n,o);for(let e=0;e<p.length;e+=1)p[e].m(n,null);i(n,r),h&&h.m(n,null),w(n,t[0].buzzKey),c||(s=[$(n,"change",t[3]),$(n,"change",Le)],c=!0)},p(e,[t]){if(0&t){let o;for(u=ae,o=0;o<u.length;o+=1){const c=_e(e,u,o);p[o]?p[o].p(c,t):(p[o]=Ee(c),p[o].c(),p[o].m(n,r))}for(;o<p.length;o+=1)p[o].d(1);p.length=u.length}3&t&&(l=!e[1].some(e[2])),l?h||(h=Te(),h.c(),h.m(n,null)):h&&(h.d(1),h=null),1&t&&w(n,e[0].buzzKey)},i:e,o:e,d(e){e&&d(n),f(p,e),h&&h.d(),c=!1,o(s)}}}function Le(){document.activeElement.blur()}function je(e,t,n){let o;s(e,te,(e=>n(1,o=e)));let{contestant:r}=t;return e.$$set=e=>{"contestant"in e&&n(0,r=e.contestant)},[r,o,e=>e.name!==r.name&&"Click"===e.buzzKey,function(){r.buzzKey=k(this),n(0,r)}]}class Je extends X{constructor(e){super(),V(this,e,je,He,c,{contestant:0})}}function Pe(e,t,n){const o=e.slice();return o[4]=t[n],o[5]=t,o[6]=n,o}function Be(e){let t,n,o,r;return{c(){t=m("hr"),n=h(),o=m("span"),o.textContent="buzz keys (click to change)",r=m("br"),b(o,"class","header")},m(e,c){a(e,t,c),a(e,n,c),a(e,o,c),a(e,r,c)},d(e){e&&d(t),e&&d(n),e&&d(o),e&&d(r)}}}function Ie(e){let t,n,o,r,c,s,l=e[4].name+"";function u(t){e[3].call(null,t,e[4],e[5],e[6])}let i={};return void 0!==e[4]&&(i.contestant=e[4]),o=new Je({props:i}),C.push((()=>function(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}(o,"contestant",u))),{c(){t=p(l),n=p(":\n    "),q(o.$$.fragment),c=m("br")},m(e,r){a(e,t,r),a(e,n,r),F(o,e,r),a(e,c,r),s=!0},p(n,c){e=n,(!s||1&c)&&l!==(l=e[4].name+"")&&y(t,l);const u={};var i;!r&&1&c&&(r=!0,u.contestant=e[4],i=()=>r=!1,E.push(i)),o.$set(u)},i(e){s||(A(o.$$.fragment,e),s=!0)},o(e){D(o.$$.fragment,e),s=!1},d(e){e&&d(t),e&&d(n),G(o,e),e&&d(c)}}}function Me(e){let t,n;return{c(){t=m("strong"),t.textContent="some players have the same buzz key\n    ",n=m("br"),z(t,"color","#ebcb8b")},m(e,o){a(e,t,o),a(e,n,o)},d(e){e&&d(t),e&&d(n)}}}function Re(e){let t,n,o,r,c=0!==e[0].length&&Be(),s=e[0],l=[];for(let t=0;t<s.length;t+=1)l[t]=Ie(Pe(e,s,t));const u=e=>D(l[e],1,1,(()=>{l[e]=null}));let i=e[1]&&Me();return{c(){c&&c.c(),t=h();for(let e=0;e<l.length;e+=1)l[e].c();n=h(),i&&i.c(),o=g()},m(e,s){c&&c.m(e,s),a(e,t,s);for(let t=0;t<l.length;t+=1)l[t].m(e,s);a(e,n,s),i&&i.m(e,s),a(e,o,s),r=!0},p(e,[r]){if(0!==e[0].length?c||(c=Be(),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),1&r){let t;for(s=e[0],t=0;t<s.length;t+=1){const o=Pe(e,s,t);l[t]?(l[t].p(o,r),A(l[t],1)):(l[t]=Ie(o),l[t].c(),A(l[t],1),l[t].m(n.parentNode,n))}for(R(),t=s.length;t<l.length;t+=1)u(t);K()}e[1]?i||(i=Me(),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},i(e){if(!r){for(let e=0;e<s.length;e+=1)A(l[e]);r=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)D(l[e]);r=!1},d(e){c&&c.d(e),e&&d(t),f(l,e),e&&d(n),i&&i.d(e),e&&d(o)}}}function Ke(e,t,n){let o,r,c;return s(e,te,(e=>n(0,c=e))),e.$$.update=()=>{1&e.$$.dirty&&n(2,o=c.map((e=>e.buzzKey))),4&e.$$.dirty&&n(1,r=o.length!==new Set(o).size)},[c,r,o,function(e,t,n,o){n[o]=e,te.set(c)}]}class Ae extends X{constructor(e){super(),V(this,e,Ke,Re,c,{})}}function De(e,t,n){const o=e.slice();return o[7]=t[n],o}function Ue(e,t,n){const o=e.slice();return o[7]=t[n],o}function We(e){let t,n,o=e[1].buzzer.owner+"";return{c(){t=p(o),n=p(" has buzzed in")},m(e,o){a(e,t,o),a(e,n,o)},p(e,n){2&n&&o!==(o=e[1].buzzer.owner+"")&&y(t,o)},d(e){e&&d(t),e&&d(n)}}}function qe(t){let n;return{c(){n=p("the buzzer is open")},m(e,t){a(e,n,t)},p:e,d(e){e&&d(n)}}}function Fe(t){let n;return{c(){n=p("the buzzer is closed")},m(e,t){a(e,n,t)},p:e,d(e){e&&d(n)}}}function Ge(e){let t,n,o,r,c,s,l=tt(e[4])+"";return{c(){t=p("the server has closed the connection\n        ("),n=p(l),o=p(")"),r=m("br"),c=h(),s=p(e[5])},m(e,l){a(e,t,l),a(e,n,l),a(e,o,l),a(e,r,l),a(e,c,l),a(e,s,l)},p(e,t){16&t&&l!==(l=tt(e[4])+"")&&y(n,l),32&t&&y(s,e[5])},d(e){e&&d(t),e&&d(n),e&&d(o),e&&d(r),e&&d(c),e&&d(s)}}}function Qe(e){let t,n,o=e[0],r=[];for(let t=0;t<o.length;t+=1)r[t]=Xe(Ue(e,o,t));let c=e[0].filter(e[6]),s=[];for(let t=0;t<c.length;t+=1)s[t]=Ye(De(e,c,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=h();for(let e=0;e<s.length;e+=1)s[e].c();n=g()},m(e,o){for(let t=0;t<r.length;t+=1)r[t].m(e,o);a(e,t,o);for(let t=0;t<s.length;t+=1)s[t].m(e,o);a(e,n,o)},p(e,l){if(3&l){let n;for(o=e[0],n=0;n<o.length;n+=1){const c=Ue(e,o,n);r[n]?r[n].p(c,l):(r[n]=Xe(c),r[n].c(),r[n].m(t.parentNode,t))}for(;n<r.length;n+=1)r[n].d(1);r.length=o.length}if(3&l){let t;for(c=e[0].filter(e[6]),t=0;t<c.length;t+=1){const o=De(e,c,t);s[t]?s[t].p(o,l):(s[t]=Ye(o),s[t].c(),s[t].m(n.parentNode,n))}for(;t<s.length;t+=1)s[t].d(1);s.length=c.length}},d(e){f(r,e),e&&d(t),f(s,e),e&&d(n)}}}function Ve(e){let t,n,o,r,c=e[7].name+"";return{c(){t=m("div"),n=m("strong"),o=p(c),r=p("\n                has already buzzed in"),z(n,"color","#ebcb8b"),z(t,"color","#ebcb8b")},m(e,c){a(e,t,c),i(t,n),i(n,o),i(t,r)},p(e,t){1&t&&c!==(c=e[7].name+"")&&y(o,c)},d(e){e&&d(t)}}}function Xe(e){let t,n=e[1].scores[e[7].name].blocked&&Ve(e);return{c(){n&&n.c(),t=g()},m(e,o){n&&n.m(e,o),a(e,t,o)},p(e,o){e[1].scores[e[7].name].blocked?n?n.p(e,o):(n=Ve(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&d(t)}}}function Ye(e){let t,n,o,r,c,s=e[7].name+"";return{c(){t=m("strong"),n=p(s),o=p(","),r=h(),c=m("span"),c.textContent="click or tap anywhere to buzz in",z(t,"color","#a3be8c"),z(c,"color","#a3be8c")},m(e,s){a(e,t,s),i(t,n),i(t,o),a(e,r,s),a(e,c,s)},p(e,t){3&t&&s!==(s=e[7].name+"")&&y(n,s)},d(e){e&&d(t),e&&d(r),e&&d(c)}}}function Ze(e){let t,n,o,r,c,s,l,u=e[1].ptsworth+"";return{c(){t=m("br"),n=h(),o=m("span"),r=p("for "),c=m("strong"),s=p(u),l=p(" points"),b(o,"id","ptsworth")},m(e,u){a(e,t,u),a(e,n,u),a(e,o,u),i(o,r),i(o,c),i(c,s),i(o,l)},p(e,t){2&t&&u!==(u=e[1].ptsworth+"")&&y(s,u)},d(e){e&&d(t),e&&d(n),e&&d(o)}}}function et(t){let n,o,r,c,s,u,i,f;function p(e,t){return e[3]===Y.Over?Ge:"Closed"===e[1].buzzer.state?Fe:"Open"===e[1].buzzer.state?qe:We}let $=p(t),y=$(t),v="Open"===t[1].buzzer.state&&Qe(t),z=(t[3]===Y.Contestant||t[3]===Y.Operator)&&Ze(t);return{c(){n=m("div"),r=h(),c=m("div"),y.c(),u=h(),v&&v.c(),i=h(),z&&z.c(),f=g(),b(n,"id","topbar"),b(n,"class",o=l(t[1].buzzer.state)+" svelte-1c5jv3u"),x(n,"ownerHere",t[2]),x(n,"serverDown",t[3]===Y.Over),b(c,"id","state"),b(c,"class",s=l(t[1].buzzer.state)+" svelte-1c5jv3u"),x(c,"ownerHere",t[2]),x(c,"serverDown",t[3]===Y.Over)},m(e,t){a(e,n,t),a(e,r,t),a(e,c,t),y.m(c,null),a(e,u,t),v&&v.m(e,t),a(e,i,t),z&&z.m(e,t),a(e,f,t)},p(e,[t]){2&t&&o!==(o=l(e[1].buzzer.state)+" svelte-1c5jv3u")&&b(n,"class",o),6&t&&x(n,"ownerHere",e[2]),10&t&&x(n,"serverDown",e[3]===Y.Over),$===($=p(e))&&y?y.p(e,t):(y.d(1),y=$(e),y&&(y.c(),y.m(c,null))),2&t&&s!==(s=l(e[1].buzzer.state)+" svelte-1c5jv3u")&&b(c,"class",s),6&t&&x(c,"ownerHere",e[2]),10&t&&x(c,"serverDown",e[3]===Y.Over),"Open"===e[1].buzzer.state?v?v.p(e,t):(v=Qe(e),v.c(),v.m(i.parentNode,i)):v&&(v.d(1),v=null),e[3]===Y.Contestant||e[3]===Y.Operator?z?z.p(e,t):(z=Ze(e),z.c(),z.m(f.parentNode,f)):z&&(z.d(1),z=null)},i:e,o:e,d(e){e&&d(n),e&&d(r),e&&d(c),y.d(),e&&d(u),v&&v.d(e),e&&d(i),z&&z.d(e),e&&d(f)}}}function tt(e){return 1e3===e?"normal":1001===e?"shut down":1002===e?"protocol":1003===e?"unsuppourted data":1006===e?"abnormal":1008===e?"policy":1009===e?"size":e.toString()}function nt(e,t,n){let o,r,c,l,u,i;s(e,te,(e=>n(0,r=e))),s(e,le,(e=>n(1,c=e))),s(e,ne,(e=>n(3,l=e))),s(e,ce,(e=>n(4,u=e))),s(e,re,(e=>n(5,i=e)));return e.$$.update=()=>{3&e.$$.dirty&&n(2,o=r.some((e=>e.name===c.buzzer.owner)))},[r,c,o,l,u,i,e=>"Click"===e.buzzKey&&!c.scores[e.name].blocked]}class ot extends X{constructor(e){super(),V(this,e,nt,et,c,{})}}function rt(e){let t,n;return{c(){t=m("span"),n=p(e[1]),b(t,"style",e[3])},m(e,o){a(e,t,o),i(t,n)},p(e,o){2&o&&y(n,e[1]),8&o&&b(t,"style",e[3])},d(e){e&&d(t)}}}function ct(e){let t,n,r,c,s;return{c(){t=m("input"),n=h(),r=m("button"),r.textContent="üû¨",b(t,"class","hidden"),b(t,"style",e[3]),b(r,"class","remove svelte-ccv93p"),b(r,"title","remove player")},m(o,l){a(o,t,l),v(t,e[2]),a(o,n,l),a(o,r,l),c||(s=[$(t,"input",e[12]),$(t,"focusout",e[5]),$(t,"keydown",e[7]),$(r,"mousedown",e[6])],c=!0)},p(e,n){8&n&&b(t,"style",e[3]),4&n&&t.value!==e[2]&&v(t,e[2])},d(e){e&&d(t),e&&d(n),e&&d(r),c=!1,o(s)}}}function st(t){let n,o,r,c,s,l;function u(e,t){return e[4]===Y.Host?ct:rt}let f=u(t),g=f(t);return{c(){n=m("span"),o=p(t[0]),r=p(":"),c=h(),g.c(),s=h(),l=m("br"),b(n,"style",t[3])},m(e,t){a(e,n,t),i(n,o),i(n,r),a(e,c,t),g.m(e,t),a(e,s,t),a(e,l,t)},p(e,[t]){1&t&&y(o,e[0]),8&t&&b(n,"style",e[3]),f===(f=u(e))&&g?g.p(e,t):(g.d(1),g=f(e),g&&(g.c(),g.m(s.parentNode,s)))},i:e,o:e,d(e){e&&d(n),e&&d(c),g.d(e),e&&d(s),e&&d(l)}}}function lt(e,t,n){let o,r,c,l,u,i;s(e,le,(e=>n(9,l=e))),s(e,te,(e=>n(10,u=e))),s(e,ne,(e=>n(4,i=e)));let{thisName:a}=t,{thisScore:d}=t,f="eceff4";function m(){let e=parseInt(o);isNaN(e)||ie.send(JSON.stringify({action:"SetScore",name:a,score:e}))}return e.$$set=e=>{"thisName"in e&&n(0,a=e.thisName),"thisScore"in e&&n(1,d=e.thisScore)},e.$$.update=()=>{2&e.$$.dirty&&n(2,o=d.toString()),1537&e.$$.dirty&&(l.scores[a].blocked?n(8,f="ebcb8b"):u.some((e=>e.name===a))?n(8,f="88c0d0"):n(8,f="eceff4")),1025&e.$$.dirty&&n(11,r=u.some((e=>e.name===a))?"bold":"normal"),2304&e.$$.dirty&&n(3,c=`color:#${f};font-weight:${r}`)},[a,d,o,c,i,m,function(){ie.send(JSON.stringify({action:"RemovePlayer",name:a}))},function(e){"Enter"==e.code&&m()},f,l,u,r,function(){o=this.value,n(2,o),n(1,d)}]}class ut extends X{constructor(e){super(),V(this,e,lt,st,c,{thisName:0,thisScore:1})}}function it(e,t,n){const o=e.slice();return o[4]=t[n],o}function at(e){let t,n;return{c(){t=m("span"),t.textContent="scores",n=m("br"),b(t,"class","header")},m(e,o){a(e,t,o),a(e,n,o)},d(e){e&&d(t),e&&d(n)}}}function dt(e){let t,n;return{c(){t=m("span"),t.textContent="scores (click to edit)",n=m("br"),b(t,"class","header")},m(e,o){a(e,t,o),a(e,n,o)},d(e){e&&d(t),e&&d(n)}}}function ft(e,t){let n,o,r;return o=new ut({props:{thisName:t[4][0],thisScore:t[4][1].score}}),{key:e,first:null,c(){n=g(),q(o.$$.fragment),this.first=n},m(e,t){a(e,n,t),F(o,e,t),r=!0},p(e,n){t=e;const r={};4&n&&(r.thisName=t[4][0]),4&n&&(r.thisScore=t[4][1].score),o.$set(r)},i(e){r||(A(o.$$.fragment,e),r=!0)},o(e){D(o.$$.fragment,e),r=!1},d(e){e&&d(n),G(o,e)}}}function mt(e){let t,n,o,r,c,s,l,u,i,f,p,g=[],b=new Map;function y(e,t){return e[1]===Y.Host?dt:at}let v=y(e),w=v(e),k=Object.entries(e[2].scores).sort(pt).reverse();const x=e=>e[4][0];for(let t=0;t<k.length;t+=1){let n=it(e,k,t),o=x(n);b.set(o,g[t]=ft(o,n))}return{c(){t=m("hr"),n=h(),w.c(),o=h(),r=m("button"),r.innerHTML="view score <u>h</u>istory",c=h(),s=m("br"),l=h(),u=m("div");for(let e=0;e<g.length;e+=1)g[e].c();z(u,"text-align","right"),z(u,"display","inline-block")},m(d,m){a(d,t,m),a(d,n,m),w.m(d,m),a(d,o,m),a(d,r,m),a(d,c,m),a(d,s,m),a(d,l,m),a(d,u,m);for(let e=0;e<g.length;e+=1)g[e].m(u,null);i=!0,f||(p=$(r,"click",e[3]),f=!0)},p(e,[t]){v!==(v=y(e))&&(w.d(1),w=v(e),w&&(w.c(),w.m(o.parentNode,o))),4&t&&(k=Object.entries(e[2].scores).sort(pt).reverse(),R(),g=function(e,t,n,o,r,c,s,l,u,i,a,d){let f=e.length,m=c.length,p=f;const h={};for(;p--;)h[e[p].key]=p;const g=[],$=new Map,b=new Map;for(p=m;p--;){const e=d(r,c,p),l=n(e);let u=s.get(l);u?o&&u.p(e,t):(u=i(l,e),u.c()),$.set(l,g[p]=u),l in h&&b.set(l,Math.abs(p-h[l]))}const y=new Set,v=new Set;function z(e){A(e,1),e.m(l,a),s.set(e.key,e),a=e.first,m--}for(;f&&m;){const t=g[m-1],n=e[f-1],o=t.key,r=n.key;t===n?(a=t.first,f--,m--):$.has(r)?!s.has(o)||y.has(o)?z(t):v.has(r)?f--:b.get(o)>b.get(r)?(v.add(o),z(t)):(y.add(r),f--):(u(n,s),f--)}for(;f--;){const t=e[f];$.has(t.key)||u(t,s)}for(;m;)z(g[m-1]);return g}(g,t,x,1,e,k,b,u,W,ft,null,it),K())},i(e){if(!i){for(let e=0;e<k.length;e+=1)A(g[e]);i=!0}},o(e){for(let e=0;e<g.length;e+=1)D(g[e]);i=!1},d(e){e&&d(t),e&&d(n),w.d(e),e&&d(o),e&&d(r),e&&d(c),e&&d(s),e&&d(l),e&&d(u);for(let e=0;e<g.length;e+=1)g[e].d();f=!1,p()}}}const pt=(e,t)=>e[1].score-t[1].score;function ht(e,t,n){let o,r,c;s(e,oe,(e=>n(0,o=e))),s(e,ne,(e=>n(1,r=e))),s(e,le,(e=>n(2,c=e))),document.addEventListener("keydown",(function(e){"h"===e.key&&u(oe,o=!0,o)}));return[o,r,c,()=>u(oe,o=!0,o)]}class gt extends X{constructor(e){super(),V(this,e,ht,mt,c,{})}}function $t(e,t,n){const o=e.slice();return o[13]=t[n],o}function bt(e){let t,n,o,r=e[13]+"";return{c(){t=m("option"),n=p(r),t.__value=o=e[13],t.value=t.__value},m(e,o){a(e,t,o),i(t,n)},p(e,c){1&c&&r!==(r=e[13]+"")&&y(n,r),1&c&&o!==(o=e[13])&&(t.__value=o,t.value=t.__value)},d(e){e&&d(t)}}}function yt(e){let t,n,r,c,s,l,u,f,g,b,v=e[3].buzzer.owner+"";return{c(){t=p("is "),n=m("strong"),r=p(v),c=h(),s=m("button"),s.innerHTML="<u>c</u>orrect",l=p(" or\n    "),u=m("button"),u.innerHTML="<u>i</u>ncorrect",f=p("?")},m(o,d){a(o,t,d),a(o,n,d),i(n,r),a(o,c,d),a(o,s,d),a(o,l,d),a(o,u,d),a(o,f,d),g||(b=[$(s,"mousedown",e[9]),$(u,"mousedown",e[10])],g=!0)},p(e,t){8&t&&v!==(v=e[3].buzzer.owner+"")&&y(r,v)},d(e){e&&d(t),e&&d(n),e&&d(c),e&&d(s),e&&d(l),e&&d(u),e&&d(f),g=!1,o(b)}}}function vt(t){let n,o,r;return{c(){n=m("button"),n.innerHTML="<u>o</u>pen buzzer",b(n,"class","large")},m(e,c){a(e,n,c),o||(r=$(n,"mousedown",t[10]),o=!0)},p:e,d(e){e&&d(n),o=!1,r()}}}function zt(t){let n,o,r;return{c(){n=m("button"),n.innerHTML="<u>e</u>nd round early",b(n,"class","large")},m(e,c){a(e,n,c),o||(r=$(n,"mousedown",t[8]),o=!0)},p:e,d(e){e&&d(n),o=!1,r()}}}function wt(t){let n,r,c,s,l,u,v,z,k,x,S,N,O,C,_,E,T,H,j,J,P,B,I,M,R,K,A,D,U=t[0]?"‚òë":"‚òê",W=t[0]?t[5]:t[4],q=[];for(let e=0;e<W.length;e+=1)q[e]=bt($t(t,W,e));function F(e,t){return"Open"===e[3].buzzer.state?zt:"Closed"===e[3].buzzer.state?vt:"TakenBy"===e[3].buzzer.state?yt:void 0}let G=F(t),Q=G&&G(t);return{c(){n=m("hr"),r=h(),c=m("span"),c.textContent="host commands",s=m("br"),l=p("\n\npoints worth:\n\n"),u=m("select");for(let e=0;e<q.length;e+=1)q[e].c();v=h(),z=m("button"),k=m("u"),k.textContent="+",S=h(),N=m("button"),O=m("u"),O.textContent="-",_=h(),E=m("br"),T=h(),H=m("button"),j=p(U),J=h(),P=m("u"),P.textContent="d",B=p("ouble Jeopardy!"),I=h(),M=m("br"),R=h(),Q&&Q.c(),K=g(),b(c,"class","header"),b(u,"type","number"),void 0===t[1]&&L((()=>t[11].call(u))),z.disabled=x=t[2]>3,N.disabled=C=t[2]<1},m(e,o){a(e,n,o),a(e,r,o),a(e,c,o),a(e,s,o),a(e,l,o),a(e,u,o);for(let e=0;e<q.length;e+=1)q[e].m(u,null);w(u,t[1]),a(e,v,o),a(e,z,o),i(z,k),a(e,S,o),a(e,N,o),i(N,O),a(e,_,o),a(e,E,o),a(e,T,o),a(e,H,o),i(H,j),i(H,J),i(H,P),i(H,B),a(e,I,o),a(e,M,o),a(e,R,o),Q&&Q.m(e,o),a(e,K,o),A||(D=[$(u,"change",t[11]),$(z,"mousedown",t[6]),$(N,"mousedown",t[7]),$(H,"mousedown",t[12])],A=!0)},p(e,[t]){if(49&t){let n;for(W=e[0]?e[5]:e[4],n=0;n<W.length;n+=1){const o=$t(e,W,n);q[n]?q[n].p(o,t):(q[n]=bt(o),q[n].c(),q[n].m(u,null))}for(;n<q.length;n+=1)q[n].d(1);q.length=W.length}51&t&&w(u,e[1]),4&t&&x!==(x=e[2]>3)&&(z.disabled=x),4&t&&C!==(C=e[2]<1)&&(N.disabled=C),1&t&&U!==(U=e[0]?"‚òë":"‚òê")&&y(j,U),G===(G=F(e))&&Q?Q.p(e,t):(Q&&Q.d(1),Q=G&&G(e),Q&&(Q.c(),Q.m(K.parentNode,K)))},i:e,o:e,d(e){e&&d(n),e&&d(r),e&&d(c),e&&d(s),e&&d(l),e&&d(u),f(q,e),e&&d(v),e&&d(z),e&&d(S),e&&d(N),e&&d(_),e&&d(E),e&&d(T),e&&d(H),e&&d(I),e&&d(M),e&&d(R),Q&&Q.d(e),e&&d(K),A=!1,o(D)}}}function kt(e,t,n){let o,r,c;s(e,se,(e=>n(2,r=e))),s(e,le,(e=>n(3,c=e)));const l=[200,400,600,800,1e3],i=[400,800,1200,1600,2e3];let a=!1;function d(){u(se,r++,r),u(se,r%=5,r)}function f(){u(se,r--,r)}function m(){ie.send(JSON.stringify({action:"EndRound"})),d()}function p(){ie.send(JSON.stringify({action:"OwnerCorrect"})),d()}function h(){ie.send(JSON.stringify({action:"OpenBuzzer"}))}document.addEventListener("keydown",(function(e){"INPUT"!==document.activeElement.nodeName&&("Open"===c.buzzer.state&&"e"===e.key?m():"Closed"===c.buzzer.state&&"o"===e.key?h():"TakenBy"===c.buzzer.state&&"c"===e.key?p():"TakenBy"===c.buzzer.state&&"i"===e.key?h():"d"===e.key?(n(0,a=!a),u(se,r=0,r)):"+"===e.key&&r<4?d():"-"===e.key&&r>0&&f())}));return e.$$.update=()=>{5&e.$$.dirty&&n(1,o=a?i[r]:l[r]),2&e.$$.dirty&&ie.send(JSON.stringify({action:"SetPtsWorth",pts:o}))},[a,o,r,c,l,i,d,f,m,p,h,function(){o=k(this),n(1,o),n(0,a),n(2,r),n(0,a),n(5,i),n(4,l)},()=>{n(0,a=!a),u(se,r=0,r)}]}class xt extends X{constructor(e){super(),V(this,e,kt,wt,c,{})}}function St(e,t,n){const o=e.slice();return o[14]=t[n],o}function Nt(e,t,n){const o=e.slice();return o[17]=t[n],o[18]=t,o[19]=n,o}function Ot(e){let t,n,r,c,s,l,u,i;function f(){e[9].call(t,e[18],e[19])}function p(){return e[10](e[17])}return{c(){t=m("input"),r=h(),c=m("button"),c.textContent="üû¨",s=h(),l=m("br"),t.disabled=n=e[17].added,b(t,"placeholder","enter your name"),b(t,"maxlength","30"),b(c,"class","remove svelte-1vlw4zy"),b(c,"title","remove contestant")},m(n,o){a(n,t,o),v(t,e[17].name),a(n,r,o),a(n,c,o),a(n,s,o),a(n,l,o),u||(i=[$(t,"input",f),$(c,"click",p)],u=!0)},p(o,r){e=o,1&r&&n!==(n=e[17].added)&&(t.disabled=n),1&r&&t.value!==e[17].name&&v(t,e[17].name)},d(e){e&&d(t),e&&d(r),e&&d(c),e&&d(s),e&&d(l),u=!1,o(i)}}}function Ct(e){let t,n,o,r,c=e[14].name+"";return{c(){t=m("span"),n=p('someone else is already named "'),o=p(c),r=p('"'),b(t,"class","dup svelte-1vlw4zy")},m(e,c){a(e,t,c),i(t,n),i(t,o),i(t,r)},p(e,t){8&t&&c!==(c=e[14].name+"")&&y(o,c)},d(e){e&&d(t)}}}function _t(t){let n,r,c,s,l,u,v,w,k,x,S,N,O,C,_,E,T,H,L,j,J,P,B,I,M,R,K,A,D,U,W=t[1]?"‚òë":"‚òê",q=t[7].get("op"),F=t[0],G=[];for(let e=0;e<F.length;e+=1)G[e]=Ot(Nt(t,F,e));let Q=t[3],V=[];for(let e=0;e<Q.length;e+=1)V[e]=Ct(St(t,Q,e));let X=q&&function(t){let n,o,r;return{c(){n=m("button"),n.textContent="operator",b(n,"id","operator"),b(n,"class","svelte-1vlw4zy")},m(e,c){a(e,n,c),o||(r=$(n,"mousedown",t[12]),o=!0)},p:e,d(e){e&&d(n),o=!1,r()}}}(t);return{c(){n=p("contestant(s), enter your name(s)"),r=m("br"),c=h(),s=m("strong"),s.textContent="hosts do not need to enter their names",l=h(),u=m("hr"),v=h();for(let e=0;e<G.length;e+=1)G[e].c();w=h(),k=m("button"),k.textContent="add contestant",x=h(),S=m("br"),N=h();for(let e=0;e<V.length;e+=1)V[e].c();O=h(),C=m("hr"),_=p("\ndoes this device need host access?"),E=m("br"),T=h(),H=m("button"),L=p(W),j=p("\n    host access"),J=h(),P=m("hr"),B=h(),I=m("button"),M=p("play"),K=h(),X&&X.c(),A=g(),z(s,"color","#88c0d0"),b(I,"class","large"),I.disabled=R=t[3].length>0},m(e,o){a(e,n,o),a(e,r,o),a(e,c,o),a(e,s,o),a(e,l,o),a(e,u,o),a(e,v,o);for(let t=0;t<G.length;t+=1)G[t].m(e,o);a(e,w,o),a(e,k,o),a(e,x,o),a(e,S,o),a(e,N,o);for(let t=0;t<V.length;t+=1)V[t].m(e,o);a(e,O,o),a(e,C,o),a(e,_,o),a(e,E,o),a(e,T,o),a(e,H,o),i(H,L),i(H,j),a(e,J,o),a(e,P,o),a(e,B,o),a(e,I,o),i(I,M),a(e,K,o),X&&X.m(e,o),a(e,A,o),D||(U=[$(k,"mousedown",t[4]),$(H,"mousedown",t[11]),$(I,"mousedown",t[6])],D=!0)},p(e,[t]){if(33&t){let n;for(F=e[0],n=0;n<F.length;n+=1){const o=Nt(e,F,n);G[n]?G[n].p(o,t):(G[n]=Ot(o),G[n].c(),G[n].m(w.parentNode,w))}for(;n<G.length;n+=1)G[n].d(1);G.length=F.length}if(8&t){let n;for(Q=e[3],n=0;n<Q.length;n+=1){const o=St(e,Q,n);V[n]?V[n].p(o,t):(V[n]=Ct(o),V[n].c(),V[n].m(O.parentNode,O))}for(;n<V.length;n+=1)V[n].d(1);V.length=Q.length}2&t&&W!==(W=e[1]?"‚òë":"‚òê")&&y(L,W),8&t&&R!==(R=e[3].length>0)&&(I.disabled=R),q&&X.p(e,t)},i:e,o:e,d(e){e&&d(n),e&&d(r),e&&d(c),e&&d(s),e&&d(l),e&&d(u),e&&d(v),f(G,e),e&&d(w),e&&d(k),e&&d(x),e&&d(S),e&&d(N),f(V,e),e&&d(O),e&&d(C),e&&d(_),e&&d(E),e&&d(T),e&&d(H),e&&d(J),e&&d(P),e&&d(B),e&&d(I),e&&d(K),X&&X.d(e),e&&d(A),D=!1,o(U)}}}function Et(e,t,n){let o,r,c,l;s(e,te,(e=>n(0,r=e))),s(e,ne,(e=>n(2,c=e))),s(e,le,(e=>n(8,l=e)));let i=!1,a=r.length;function d(e){for(let t=0;t<r.length;t++)if(r[t].name===e){r.splice(t,1),te.set(r),a--,r[t].added&&ie.send(JSON.stringify({action:"RemovePlayer",name:r[t].name}));break}}const f=new URLSearchParams(window.location.search);return e.$$.update=()=>{257&e.$$.dirty&&n(3,o=r.filter((e=>Object.entries(l.scores).some((t=>t[0]===e.name))&&!e.added)))},[r,i,c,o,function(){u(te,r=[...r,{name:"",buzzKey:ae[a].code,added:!1}],r),a++},d,function(){for(var e of r)e.name=e.name.trim();u(te,r=r.filter((e=>e.name.length>0)),r);for(const e of r)e.added||(ie.send(JSON.stringify({action:"AddPlayer",name:e.name})),e.added=!0);u(ne,c=i?Y.Host:Y.Contestant,c)},f,l,function(e,t){e[t].name=this.value,te.set(r)},e=>d(e.name),()=>n(1,i=!i),()=>{u(te,r=[],r),u(ne,c=Y.Operator,c)}]}class Tt extends X{constructor(e){super(),V(this,e,Et,_t,c,{})}}const{window:Ht}=U;function Lt(e){let t,n,o,r,c,s;t=new ot({});const l=[It,Bt],u=[];function i(e,t){return e[1]?0:1}return o=i(e),r=u[o]=l[o](e),{c(){q(t.$$.fragment),n=h(),r.c(),c=g()},m(e,r){F(t,e,r),a(e,n,r),u[o].m(e,r),a(e,c,r),s=!0},p(e,t){let n=o;o=i(e),o!==n&&(R(),D(u[n],1,1,(()=>{u[n]=null})),K(),r=u[o],r||(r=u[o]=l[o](e),r.c()),A(r,1),r.m(c.parentNode,c))},i(e){s||(A(t.$$.fragment,e),A(r),s=!0)},o(e){D(t.$$.fragment,e),D(r),s=!1},d(e){G(t,e),e&&d(n),u[o].d(e),e&&d(c)}}}function jt(e){let t,n,o,r,c,s,l,u,i,f,p,y,v;o=new ot({}),c=new Ae({});let z=e[0]===Y.Host&&Mt();const w=[Kt,Rt],k=[];function x(e,t){return e[1]?0:1}return u=x(e),i=k[u]=w[u](e),{c(){t=m("button"),t.textContent="‚Üê setup",n=h(),q(o.$$.fragment),r=h(),q(c.$$.fragment),s=h(),z&&z.c(),l=h(),i.c(),f=g(),b(t,"id","setup"),b(t,"class","svelte-gomres")},m(i,d){a(i,t,d),a(i,n,d),F(o,i,d),a(i,r,d),F(c,i,d),a(i,s,d),z&&z.m(i,d),a(i,l,d),k[u].m(i,d),a(i,f,d),p=!0,y||(v=$(t,"click",e[5]),y=!0)},p(e,t){e[0]===Y.Host?z?1&t&&A(z,1):(z=Mt(),z.c(),A(z,1),z.m(l.parentNode,l)):z&&(R(),D(z,1,1,(()=>{z=null})),K());let n=u;u=x(e),u!==n&&(R(),D(k[n],1,1,(()=>{k[n]=null})),K(),i=k[u],i||(i=k[u]=w[u](e),i.c()),A(i,1),i.m(f.parentNode,f))},i(e){p||(A(o.$$.fragment,e),A(c.$$.fragment,e),A(z),A(i),p=!0)},o(e){D(o.$$.fragment,e),D(c.$$.fragment,e),D(z),D(i),p=!1},d(e){e&&d(t),e&&d(n),G(o,e),e&&d(r),G(c,e),e&&d(s),z&&z.d(e),e&&d(l),k[u].d(e),e&&d(f),y=!1,v()}}}function Jt(e){let t,n,o,r,c,s,l,u,i,f,p,y;o=new ot({}),c=new he({});const v=[Dt,At],z=[];function w(e,t){return e[1]?0:1}return l=w(e),u=z[l]=v[l](e),{c(){t=m("button"),t.textContent="‚Üê setup",n=h(),q(o.$$.fragment),r=h(),q(c.$$.fragment),s=h(),u.c(),i=g(),b(t,"id","setup"),b(t,"class","svelte-gomres")},m(u,d){a(u,t,d),a(u,n,d),F(o,u,d),a(u,r,d),F(c,u,d),a(u,s,d),z[l].m(u,d),a(u,i,d),f=!0,p||(y=$(t,"click",e[4]),p=!0)},p(e,t){let n=l;l=w(e),l!==n&&(R(),D(z[n],1,1,(()=>{z[n]=null})),K(),u=z[l],u||(u=z[l]=v[l](e),u.c()),A(u,1),u.m(i.parentNode,i))},i(e){f||(A(o.$$.fragment,e),A(c.$$.fragment,e),A(u),f=!0)},o(e){D(o.$$.fragment,e),D(c.$$.fragment,e),D(u),f=!1},d(e){e&&d(t),e&&d(n),G(o,e),e&&d(r),G(c,e),e&&d(s),z[l].d(e),e&&d(i),p=!1,y()}}}function Pt(t){let n,o;return n=new Tt({}),{c(){q(n.$$.fragment)},m(e,t){F(n,e,t),o=!0},p:e,i(e){o||(A(n.$$.fragment,e),o=!0)},o(e){D(n.$$.fragment,e),o=!1},d(e){G(n,e)}}}function Bt(e){let t,n;return t=new gt({}),{c(){q(t.$$.fragment)},m(e,o){F(t,e,o),n=!0},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){D(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function It(e){let t,n;return t=new Ce({}),{c(){q(t.$$.fragment)},m(e,o){F(t,e,o),n=!0},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){D(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function Mt(e){let t,n;return t=new xt({}),{c(){q(t.$$.fragment)},m(e,o){F(t,e,o),n=!0},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){D(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function Rt(e){let t,n;return t=new gt({}),{c(){q(t.$$.fragment)},m(e,o){F(t,e,o),n=!0},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){D(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function Kt(e){let t,n;return t=new Ce({}),{c(){q(t.$$.fragment)},m(e,o){F(t,e,o),n=!0},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){D(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function At(e){let t,n;return t=new gt({}),{c(){q(t.$$.fragment)},m(e,o){F(t,e,o),n=!0},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){D(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function Dt(e){let t,n;return t=new Ce({}),{c(){q(t.$$.fragment)},m(e,o){F(t,e,o),n=!0},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){D(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function Ut(e){let t,n,r,c,s,l,u;const i=[Pt,Jt,jt,Lt],f=[];function p(e,t){return e[0]===Y.Setup?0:e[0]===Y.Operator?1:e[0]!==Y.Over?2:3}return t=p(e),n=f[t]=i[t](e),{c(){n.c(),r=h(),c=m("div"),c.textContent="v5.4.0",b(c,"id","footer"),b(c,"class","svelte-gomres")},m(n,o){f[t].m(n,o),a(n,r,o),a(n,c,o),s=!0,l||(u=[$(Ht,"mousedown",e[2]),$(Ht,"keydown",e[3]),$(Ht,"touchstart",e[2])],l=!0)},p(e,[o]){let c=t;t=p(e),t===c?f[t].p(e,o):(R(),D(f[c],1,1,(()=>{f[c]=null})),K(),n=f[t],n?n.p(e,o):(n=f[t]=i[t](e),n.c()),A(n,1),n.m(r.parentNode,r))},i(e){s||(A(n),s=!0)},o(e){D(n),s=!1},d(e){f[t].d(e),e&&d(r),e&&d(c),l=!1,o(u)}}}function Wt(e,t,n){let o,r,c,l,i,a,d,f;function m(e,t){const n=new Date;u(le,o.history=[{time:[n.getHours(),n.getMinutes()],name:e,delta:t},...o.history],o)}function p(e){o.scores[e.name].blocked||ie.send(JSON.stringify({action:"Buzz",name:e.name}))}s(e,le,(e=>n(8,o=e))),s(e,se,(e=>n(9,r=e))),s(e,te,(e=>n(10,c=e))),s(e,ne,(e=>n(0,l=e))),s(e,re,(e=>n(11,i=e))),s(e,ce,(e=>n(12,a=e))),s(e,oe,(e=>n(1,d=e))),ie.onmessage=function(e){let t=JSON.parse(e.data),n=t.action;if("SetScore"===n){let e=o.scores[t.name];m(t.name,t.score-e.score),e.score=t.score}else if("EndRound"===n){for(var s of Object.entries(o.scores))s[1].blocked=!1;u(le,o.buzzer.state="Closed",o),window.clearTimeout(f)}else if("OpenBuzzer"===n){let e=Object.values(o.scores);0!==e.length&&e.every((e=>e.blocked))?(u(le,o.buzzer.state="Closed",o),Object.values(o.scores).map((e=>e.blocked=!1))):u(le,o.buzzer.state="Open",o),f=window.setTimeout((function(){for(var e of Object.entries(o.scores))e[1].blocked=!1;u(le,o.buzzer.state="Closed",o),u(se,r++,r),u(se,r%=5,r)}),5e3)}else if("AddPlayer"===n)u(le,o.scores[t.name]={score:0,blocked:!1},o);else if("RemovePlayer"===n)delete o.scores[t.name],le.set(o),u(te,c=c.filter((e=>e.name!==t.name)),c);else if("Unblock"===n)u(le,o.scores[t.name].blocked=!1,o);else if("EditHistory"===n){let e=o.history[t.index],n=t.delta-e.delta;e.delta=t.delta,u(le,o.scores[e.name].score+=n,o)}else if("RemoveHistory"===n){let e=o.history[t.index];u(le,o.scores[e.name].score-=e.delta,o),o.history.splice(t.index,1),le.set(o)}else if("SetPtsWorth"===n)u(le,o.ptsworth=t.pts,o);else if("OwnerCorrect"===n){o.scores[o.buzzer.owner].score+=o.ptsworth,m(o.buzzer.owner,o.ptsworth),Object.values(o.scores).map((e=>e.blocked=!1)),u(le,o.buzzer.state="Closed",o)}else if("SetState"===n){u(le,o=t.state,o);const e=(new Date).getTimezoneOffset()/60;for(let t of o.history)t.time[0]+=e,t.time[0]%=24}else"Buzz"===n&&(u(le,o.scores[t.name].blocked=!0,o),u(le,o.buzzer={state:"TakenBy",owner:t.name},o),window.clearTimeout(f))},ie.onclose=function(e){u(ne,l=Y.Over,l),u(re,i=e.reason,i),u(ce,a=e.code,a)};return[l,d,function(e){let t=e.target,n=e.srcElement,o=["INPUT","BUTTON","SELECT"];if(!o.includes(t.tagName)&&!o.includes(n.tagName))for(const e of c)"Click"===e.buzzKey&&p(e)},function(e){for(const t of c)t.buzzKey===e.code&&p(t)},()=>u(ne,l=Y.Setup,l),()=>u(ne,l=Y.Setup,l)]}return new class extends X{constructor(e){super(),V(this,e,Wt,Ut,c,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
